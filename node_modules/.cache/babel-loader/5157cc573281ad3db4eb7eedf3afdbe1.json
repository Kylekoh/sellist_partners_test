{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  width: 208px;\\n  height: 36px;\\n  border-radius: 4px;\\n  font-weight: bold;\\n  font-size: 14px;\\n  line-height: 16px;\\n  text-align: center;\\n  letter-spacing: 0.08em;\\n  color: #ffffff;\\n  background: \",\";\\n  cursor: \",\";\\n  @media (max-width: 500px) {\\n    width: 160px;\\n  }\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 220px;\\n  background: #f2f6ff;\\n  \",\";\\n  width: 100%;\\n  @media (max-width: 500px) {\\n    display: flex;\\n    justify-content: center;\\n    margin-top: 50px;\\n  }\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  @media (max-width: 500px) {\\n    margin-top: 50px;\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  @media (max-width: 500px) {\\n    display: flex;\\n    justify-content: center;\\n  }\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  margin-right: 120px;\\n  @media (max-width: 500px) {\\n    margin-right: 0px;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  @media (max-width: 500px) {\\n    flex-direction: column;\\n  }\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-weight: 500;\\n  font-size: 21px;\\n  color: #212121;\\n  margin-bottom: 15px;\\n  @media (max-width: 500px) {\\n    font-size: 18px;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  @media (max-width: 500px) {\\n    padding-left: 12px;\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  /* p {\\n    font-style: normal;\\n    font-weight: 500;\\n    font-size: 21px;\\n    line-height: 25px;\\n    color: #212121;\\n    height: 40px;\\n  } */\\n  @media (max-width: 500px) {\\n    margin-bottom: 100px;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    /* align-items: center; */\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}// 기본\nimport React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Prompt,withRouter}from\"react-router-dom\";//라이브러리\nimport{format}from\"date-fns\";import styled from\"styled-components\";import axios from\"axios\";// 컴포넌트\nimport DateRangePicker from\"./DateRangePicker\";import BeforeSelectDate from\"./BeforeSelectDate\";import AfterSelectDate from\"./AfterSelectDate\";import CheckSponsoredEventModal from\"./CheckSponsoredEventModal\";import{headers,createEventAPI}from\"../../../Config/urls\";import{openModal}from\"../../../modules/CheckModalModule\";import Loading from\"../../../Components/Loading\";function CreateEventDate(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var email=localStorage.getItem(\"email\");var accessToken=localStorage.getItem(\"access_token\");var username=useSelector(function(store){return store.usernameReducer;});var userImage=useSelector(function(store){return store.profileimgReducer;});var eventname=useSelector(function(store){return store.eventnameReducer;});var eventimg=useSelector(function(store){return store.eventimgReducer;});var eventUrl=useSelector(function(store){return store.eventurlReducer;});var shoppingUrl=useSelector(function(store){return store.shoppingurlReducer;});var originalPrice=useSelector(function(store){return store.originalpriceReducer;});var newPrice=useSelector(function(store){return store.newpriceReducer;});var durationStart=useSelector(function(store){return store.durationStartReducer;});var durationEnd=useSelector(function(store){return store.durationEndReducer;});var category=useSelector(function(store){return store.eventcategoryReducer;});var isCheckModal=useSelector(function(store){return store.checkModalReducer;});var notEnoughPoint=useSelector(function(store){return store.notenoughReducer;});var dispatch=useDispatch();var sponsorStartDate=useSelector(function(store){return store.sponsorStartDateReducer;});var sponsorEndDate=useSelector(function(store){return store.sponsorEndDateReducer;});var difference=sponsorEndDate-sponsorStartDate;var days=Math.floor(difference/(1000*60*60*24)+1);var totalCredits=days*10;// 01.19 새로 만든 것\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),confirm=_useState4[0],setConfirm=_useState4[1];// useEffect(() => {\n//   console.log(\"크리에이트 아이템 페이지에서 오는 것\");\n//   console.log(\"사용자\", username);\n//   console.log(\"사용자 사진\", userImage);\n//   console.log(\"이벤트명\", eventname);\n//   console.log(\"이벤트 사진\", eventimg);\n//   console.log(\"이벤트 URL\", eventUrl);\n//   console.log(\"쇼핑URL\", shoppingUrl);\n//   console.log(\"원래가격\", originalPrice);\n//   console.log(\"할인가격\", newPrice);\n//   console.log(\"이벤트 시작\", durationStart);\n//   console.log(\"이벤트 종료\", durationEnd);\n//   console.log(\"카테고리\", category);\n// }, []);\nuseEffect(function(){// 각 항목을 Validation해서  confirm 버튼 활성 유무를 결정하기 위한 것\nif(notEnoughPoint){setConfirm(true);}else{setConfirm(false);}},[notEnoughPoint]);// useEffect(() => {\n//   console.log(\"크리에이트 데이트 유저 네임\", username);\n//   console.log(\"크리에이트 데이트 이벤트 네임\", eventname);\n//   console.log(\"체크 모달\", isCheckModal);\n//   console.log(sponsorStartDate);\n//   console.log(sponsorEndDate);\n// }, []);\n// 이벤트 생성 하는 함수\nvar handleCreateSponsoredEvent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// 로딩바 실현\nsetIsLoading(true);if(!confirm){_context.next=26;break;}// 무료 이벤트 && 체트 통과 일 때\nformData=new FormData();formData.append(\"email\",email);formData.append(\"event_image\",eventimg);formData.append(\"user_image\",userImage);formData.append(\"username\",username);formData.append(\"event_name\",eventname);formData.append(\"event_url\",eventUrl);formData.append(\"event_external_link\",shoppingUrl);formData.append(\"event_original_price\",originalPrice);formData.append(\"event_sale_price\",newPrice);formData.append(\"event_platform\",\"instagram\");formData.append(\"event_duration\",\"\".concat(format(durationStart,\"MM/d\"),\" - \").concat(format(durationEnd,\"MM/d\")));formData.append(\"event_category\",category);// 광고 시작일, 종료일\nformData.append(\"event_start\",durationStart);formData.append(\"event_end\",durationEnd);formData.append(\"event_ad_start\",sponsorStartDate);formData.append(\"event_ad_end\",sponsorEndDate);// 무료기 때문에 크레딧은 '0'로\nformData.append(\"event_credit\",totalCredits);// 무료일때 true 광고일때 : false\nformData.append(\"evnet_free\",false);// 무료일때 : 1 , 광고일때 : 4\nformData.append(\"event_type\",4);_context.next=24;return axios.post(createEventAPI,formData,{headers:headers}).then(function(res){console.log(\"스폰서드 이벤트 만들기 서버 응답 결과\",res);if(res.data.success===1){window.location.href=\"/Congrats\";setIsLoading(false);}else{console.log(\"event not created\");setIsLoading(false);}});case 24:_context.next=27;break;case 26:if(confirm){// 스폰서드 이벤트 && 체크 통과 일 때\n// window.location.href = \"/CreateEvent/CreateDate\";\nsetIsLoading(false);}else{// 체크 통과하지 못했을 때\ndispatch(openModal(true));setIsLoading(false);}case 27:case\"end\":return _context.stop();}}},_callee);}));return function handleCreateSponsoredEvent(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(CalendarWrap,null,/*#__PURE__*/React.createElement(CalendarContainer,null,/*#__PURE__*/React.createElement(TitleWrap,null,/*#__PURE__*/React.createElement(Title,null,\"\\uBAA8\\uB450\\uC758 \\uC140\\uB7EC\\uC5D0\\uC11C \\uD64D\\uBCF4\\uD558\\uC2E4 \\uB0A0\\uC9DC\\uB97C \\uC120\\uD0DD\\uD574 \\uC8FC\\uC138\\uC694\")),/*#__PURE__*/React.createElement(ScheduleContainer,null,/*#__PURE__*/React.createElement(DateRangePicker,null))),/*#__PURE__*/React.createElement(DateSelectContainer,null,/*#__PURE__*/React.createElement(TitleWrap,null,/*#__PURE__*/React.createElement(Title,null,\"\\uC120\\uD0DD\\uB41C \\uB0A0\\uC9DC\")),sponsorStartDate?/*#__PURE__*/React.createElement(AfterSelectDate,null):/*#__PURE__*/React.createElement(BeforeSelectDate,null))),/*#__PURE__*/React.createElement(ConfirmBtnWrap,null,/*#__PURE__*/React.createElement(ConfirmBtn,{confirm:confirm,onClick:function onClick(){handleCreateSponsoredEvent();}},\"\\uD655 \\uC778\")),isCheckModal&&/*#__PURE__*/React.createElement(CheckSponsoredEventModal,null),isLoading?/*#__PURE__*/React.createElement(Loading,null):null);}export default withRouter(CreateEventDate);var Container=styled.main(_templateObject());var TitleWrap=styled.div(_templateObject2());var Title=styled.span(_templateObject3());var CalendarWrap=styled.div(_templateObject4());var CalendarContainer=styled.div(_templateObject5());var ScheduleContainer=styled.div(_templateObject6());var DateSelectContainer=styled.div(_templateObject7());var ConfirmBtnWrap=styled.div(_templateObject8(),function(_ref2){var theme=_ref2.theme;return theme.flex(\"flex-start\",\"center\",\"row-reverse\");});var ConfirmBtn=styled.button(_templateObject9(),function(_ref3){var confirm=_ref3.confirm;return confirm?\"#212121\":\"#BDBDBD\";},function(_ref4){var confirm=_ref4.confirm;return confirm?\"pointer\":\"cursor\";});","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/src/Pages/CreateEvent/CreateEventDate/CreateEventDate.js"],"names":["React","useState","useEffect","useSelector","useDispatch","Prompt","withRouter","format","styled","axios","DateRangePicker","BeforeSelectDate","AfterSelectDate","CheckSponsoredEventModal","headers","createEventAPI","openModal","Loading","CreateEventDate","props","isLoading","setIsLoading","email","localStorage","getItem","accessToken","username","store","usernameReducer","userImage","profileimgReducer","eventname","eventnameReducer","eventimg","eventimgReducer","eventUrl","eventurlReducer","shoppingUrl","shoppingurlReducer","originalPrice","originalpriceReducer","newPrice","newpriceReducer","durationStart","durationStartReducer","durationEnd","durationEndReducer","category","eventcategoryReducer","isCheckModal","checkModalReducer","notEnoughPoint","notenoughReducer","dispatch","sponsorStartDate","sponsorStartDateReducer","sponsorEndDate","sponsorEndDateReducer","difference","days","Math","floor","totalCredits","confirm","setConfirm","handleCreateSponsoredEvent","formData","FormData","append","post","then","res","console","log","data","success","window","location","href","Container","main","TitleWrap","div","Title","span","CalendarWrap","CalendarContainer","ScheduleContainer","DateSelectContainer","ConfirmBtnWrap","theme","flex","ConfirmBtn","button"],"mappings":"szGAAA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,kBAAnC,CACA;AACA,OAASC,MAAT,KAAuB,UAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,wBAAP,KAAqC,4BAArC,CACA,OAASC,OAAT,CAAkBC,cAAlB,KAAwC,sBAAxC,CACA,OAASC,SAAT,KAA0B,mCAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CAEA,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,eACIlB,QAAQ,CAAC,KAAD,CADZ,wCACvBmB,SADuB,eACZC,YADY,eAE9B,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMC,CAAAA,WAAW,CAAGF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB,CACA,GAAME,CAAAA,QAAQ,CAAGvB,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACC,eAAV,EAAN,CAA5B,CACA,GAAMC,CAAAA,SAAS,CAAG1B,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACG,iBAAV,EAAN,CAA7B,CACA,GAAMC,CAAAA,SAAS,CAAG5B,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACK,gBAAV,EAAN,CAA7B,CACA,GAAMC,CAAAA,QAAQ,CAAG9B,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACO,eAAV,EAAN,CAA5B,CAEA,GAAMC,CAAAA,QAAQ,CAAGhC,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACS,eAAV,EAAN,CAA5B,CACA,GAAMC,CAAAA,WAAW,CAAGlC,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACW,kBAAV,EAAN,CAA/B,CACA,GAAMC,CAAAA,aAAa,CAAGpC,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACa,oBAAV,EAAN,CAAjC,CACA,GAAMC,CAAAA,QAAQ,CAAGtC,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACe,eAAV,EAAN,CAA5B,CACA,GAAMC,CAAAA,aAAa,CAAGxC,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACiB,oBAAV,EAAN,CAAjC,CACA,GAAMC,CAAAA,WAAW,CAAG1C,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACmB,kBAAV,EAAN,CAA/B,CACA,GAAMC,CAAAA,QAAQ,CAAG5C,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACqB,oBAAV,EAAN,CAA5B,CAEA,GAAMC,CAAAA,YAAY,CAAG9C,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACuB,iBAAV,EAAN,CAAhC,CACA,GAAMC,CAAAA,cAAc,CAAGhD,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAACyB,gBAAV,EAAN,CAAlC,CACA,GAAMC,CAAAA,QAAQ,CAAGjD,WAAW,EAA5B,CAEA,GAAMkD,CAAAA,gBAAgB,CAAGnD,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAAC4B,uBAAV,EAAN,CAApC,CACA,GAAMC,CAAAA,cAAc,CAAGrD,WAAW,CAAC,SAAAwB,KAAK,QAAIA,CAAAA,KAAK,CAAC8B,qBAAV,EAAN,CAAlC,CAEA,GAAMC,CAAAA,UAAU,CAAGF,cAAc,CAAGF,gBAApC,CACA,GAAMK,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,UAAU,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAV,CAAqC,CAAhD,CAAb,CACA,GAAMI,CAAAA,YAAY,CAAGH,IAAI,CAAG,EAA5B,CAEA;AA5B8B,eA6BA1D,QAAQ,CAAC,KAAD,CA7BR,yCA6BvB8D,OA7BuB,eA6BdC,UA7Bc,eA+B9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA9D,SAAS,CAAC,UAAM,CACd;AACA,GAAIiD,cAAJ,CAAoB,CAClBa,UAAU,CAAC,IAAD,CAAV,CACD,CAFD,IAEO,CACLA,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAPQ,CAON,CAACb,cAAD,CAPM,CAAT,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,GAAMc,CAAAA,0BAA0B,0FAAG,gJACjC;AACA5C,YAAY,CAAC,IAAD,CAAZ,CAFiC,IAG7B0C,OAH6B,0BAI/B;AACMG,QALyB,CAKd,GAAIC,CAAAA,QAAJ,EALc,CAM/BD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyB9C,KAAzB,EACA4C,QAAQ,CAACE,MAAT,CAAgB,aAAhB,CAA+BnC,QAA/B,EACAiC,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8BvC,SAA9B,EACAqC,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4B1C,QAA5B,EACAwC,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8BrC,SAA9B,EACAmC,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA6BjC,QAA7B,EACA+B,QAAQ,CAACE,MAAT,CAAgB,qBAAhB,CAAuC/B,WAAvC,EACA6B,QAAQ,CAACE,MAAT,CAAgB,sBAAhB,CAAwC7B,aAAxC,EACA2B,QAAQ,CAACE,MAAT,CAAgB,kBAAhB,CAAoC3B,QAApC,EACAyB,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,CAAkC,WAAlC,EACAF,QAAQ,CAACE,MAAT,CACE,gBADF,WAEK7D,MAAM,CAACoC,aAAD,QAFX,eAEwCpC,MAAM,CAACsC,WAAD,QAF9C,GAIAqB,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,CAAkCrB,QAAlC,EACA;AACAmB,QAAQ,CAACE,MAAT,CAAgB,aAAhB,CAA+BzB,aAA/B,EACAuB,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA6BvB,WAA7B,EACAqB,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,CAAkCd,gBAAlC,EACAY,QAAQ,CAACE,MAAT,CAAgB,cAAhB,CAAgCZ,cAAhC,EACA;AACAU,QAAQ,CAACE,MAAT,CAAgB,cAAhB,CAAgCN,YAAhC,EACA;AACAI,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8B,KAA9B,EACA;AACAF,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8B,CAA9B,EA/B+B,uBAiCzB3D,CAAAA,KAAK,CACR4D,IADG,CACEtD,cADF,CACkBmD,QADlB,CAC4B,CAC9BpD,OAAO,CAAPA,OAD8B,CAD5B,EAIHwD,IAJG,CAIE,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCF,GAArC,EACA,GAAIA,GAAG,CAACG,IAAJ,CAASC,OAAT,GAAqB,CAAzB,CAA4B,CAC1BC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,WAAvB,CACAzD,YAAY,CAAC,KAAD,CAAZ,CACD,CAHD,IAGO,CACLmD,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACApD,YAAY,CAAC,KAAD,CAAZ,CACD,CACF,CAbG,CAjCyB,wCA+C1B,GAAI0C,OAAJ,CAAa,CAClB;AACA;AACA1C,YAAY,CAAC,KAAD,CAAZ,CACD,CAJM,IAIA,CACL;AACAgC,QAAQ,CAACrC,SAAS,CAAC,IAAD,CAAV,CAAR,CACAK,YAAY,CAAC,KAAD,CAAZ,CACD,CAvDgC,uDAAH,kBAA1B4C,CAAAA,0BAA0B,0CAAhC,CA0DA,mBACE,oBAAC,SAAD,mBACE,oBAAC,YAAD,mBACE,oBAAC,iBAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,KAAD,sIADF,CADF,cAIE,oBAAC,iBAAD,mBACE,oBAAC,eAAD,MADF,CAJF,CADF,cASE,oBAAC,mBAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,KAAD,wCADF,CADF,CAIGX,gBAAgB,cAAG,oBAAC,eAAD,MAAH,cAAyB,oBAAC,gBAAD,MAJ5C,CATF,CADF,cAiBE,oBAAC,cAAD,mBACE,oBAAC,UAAD,EACE,OAAO,CAAES,OADX,CAEE,OAAO,CAAE,kBAAM,CACbE,0BAA0B,GAC3B,CAJH,kBADF,CAjBF,CA2BGhB,YAAY,eAAI,oBAAC,wBAAD,MA3BnB,CA4BG7B,SAAS,cAAG,oBAAC,OAAD,MAAH,CAAiB,IA5B7B,CADF,CAgCD,CAED,cAAed,CAAAA,UAAU,CAACY,eAAD,CAAzB,CAEA,GAAM6D,CAAAA,SAAS,CAAGvE,MAAM,CAACwE,IAAV,mBAAf,CAkBA,GAAMC,CAAAA,SAAS,CAAGzE,MAAM,CAAC0E,GAAV,oBAAf,CASA,GAAMC,CAAAA,KAAK,CAAG3E,MAAM,CAAC4E,IAAV,oBAAX,CAUA,GAAMC,CAAAA,YAAY,CAAG7E,MAAM,CAAC0E,GAAV,oBAAlB,CAQA,GAAMI,CAAAA,iBAAiB,CAAG9E,MAAM,CAAC0E,GAAV,oBAAvB,CASA,GAAMK,CAAAA,iBAAiB,CAAG/E,MAAM,CAAC0E,GAAV,oBAAvB,CAOA,GAAMM,CAAAA,mBAAmB,CAAGhF,MAAM,CAAC0E,GAAV,oBAAzB,CAUA,GAAMO,CAAAA,cAAc,CAAGjF,MAAM,CAAC0E,GAAV,oBAGhB,mBAAGQ,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,IAAN,CAAW,YAAX,CAAyB,QAAzB,CAAmC,aAAnC,CAAf,EAHgB,CAApB,CAYA,GAAMC,CAAAA,UAAU,CAAGpF,MAAM,CAACqF,MAAV,oBAUA,mBAAG9B,CAAAA,OAAH,OAAGA,OAAH,OAAkBA,CAAAA,OAAO,CAAG,SAAH,CAAe,SAAxC,EAVA,CAWJ,mBAAGA,CAAAA,OAAH,OAAGA,OAAH,OAAkBA,CAAAA,OAAO,CAAG,SAAH,CAAe,QAAxC,EAXI,CAAhB","sourcesContent":["// 기본\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Prompt, withRouter } from \"react-router-dom\";\n//라이브러리\nimport { format } from \"date-fns\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\n// 컴포넌트\nimport DateRangePicker from \"./DateRangePicker\";\nimport BeforeSelectDate from \"./BeforeSelectDate\";\nimport AfterSelectDate from \"./AfterSelectDate\";\nimport CheckSponsoredEventModal from \"./CheckSponsoredEventModal\";\nimport { headers, createEventAPI } from \"../../../Config/urls\";\nimport { openModal } from \"../../../modules/CheckModalModule\";\nimport Loading from \"../../../Components/Loading\";\n\nfunction CreateEventDate(props) {\n  const [isLoading, setIsLoading] = useState(false);\n  const email = localStorage.getItem(\"email\");\n  const accessToken = localStorage.getItem(\"access_token\");\n  const username = useSelector(store => store.usernameReducer);\n  const userImage = useSelector(store => store.profileimgReducer);\n  const eventname = useSelector(store => store.eventnameReducer);\n  const eventimg = useSelector(store => store.eventimgReducer);\n\n  const eventUrl = useSelector(store => store.eventurlReducer);\n  const shoppingUrl = useSelector(store => store.shoppingurlReducer);\n  const originalPrice = useSelector(store => store.originalpriceReducer);\n  const newPrice = useSelector(store => store.newpriceReducer);\n  const durationStart = useSelector(store => store.durationStartReducer);\n  const durationEnd = useSelector(store => store.durationEndReducer);\n  const category = useSelector(store => store.eventcategoryReducer);\n\n  const isCheckModal = useSelector(store => store.checkModalReducer);\n  const notEnoughPoint = useSelector(store => store.notenoughReducer);\n  const dispatch = useDispatch();\n\n  const sponsorStartDate = useSelector(store => store.sponsorStartDateReducer);\n  const sponsorEndDate = useSelector(store => store.sponsorEndDateReducer);\n\n  const difference = sponsorEndDate - sponsorStartDate;\n  const days = Math.floor(difference / (1000 * 60 * 60 * 24) + 1);\n  const totalCredits = days * 10;\n\n  // 01.19 새로 만든 것\n  const [confirm, setConfirm] = useState(false);\n\n  // useEffect(() => {\n  //   console.log(\"크리에이트 아이템 페이지에서 오는 것\");\n  //   console.log(\"사용자\", username);\n  //   console.log(\"사용자 사진\", userImage);\n  //   console.log(\"이벤트명\", eventname);\n  //   console.log(\"이벤트 사진\", eventimg);\n  //   console.log(\"이벤트 URL\", eventUrl);\n  //   console.log(\"쇼핑URL\", shoppingUrl);\n  //   console.log(\"원래가격\", originalPrice);\n  //   console.log(\"할인가격\", newPrice);\n  //   console.log(\"이벤트 시작\", durationStart);\n  //   console.log(\"이벤트 종료\", durationEnd);\n  //   console.log(\"카테고리\", category);\n  // }, []);\n\n  useEffect(() => {\n    // 각 항목을 Validation해서  confirm 버튼 활성 유무를 결정하기 위한 것\n    if (notEnoughPoint) {\n      setConfirm(true);\n    } else {\n      setConfirm(false);\n    }\n  }, [notEnoughPoint]);\n\n  // useEffect(() => {\n  //   console.log(\"크리에이트 데이트 유저 네임\", username);\n  //   console.log(\"크리에이트 데이트 이벤트 네임\", eventname);\n  //   console.log(\"체크 모달\", isCheckModal);\n  //   console.log(sponsorStartDate);\n  //   console.log(sponsorEndDate);\n  // }, []);\n\n  // 이벤트 생성 하는 함수\n  const handleCreateSponsoredEvent = async () => {\n    // 로딩바 실현\n    setIsLoading(true);\n    if (confirm) {\n      // 무료 이벤트 && 체트 통과 일 때\n      const formData = new FormData();\n      formData.append(\"email\", email);\n      formData.append(\"event_image\", eventimg);\n      formData.append(\"user_image\", userImage);\n      formData.append(\"username\", username);\n      formData.append(\"event_name\", eventname);\n      formData.append(\"event_url\", eventUrl);\n      formData.append(\"event_external_link\", shoppingUrl);\n      formData.append(\"event_original_price\", originalPrice);\n      formData.append(\"event_sale_price\", newPrice);\n      formData.append(\"event_platform\", \"instagram\");\n      formData.append(\n        \"event_duration\",\n        `${format(durationStart, `MM/d`)} - ${format(durationEnd, `MM/d`)}`\n      );\n      formData.append(\"event_category\", category);\n      // 광고 시작일, 종료일\n      formData.append(\"event_start\", durationStart);\n      formData.append(\"event_end\", durationEnd);\n      formData.append(\"event_ad_start\", sponsorStartDate);\n      formData.append(\"event_ad_end\", sponsorEndDate);\n      // 무료기 때문에 크레딧은 '0'로\n      formData.append(\"event_credit\", totalCredits);\n      // 무료일때 true 광고일때 : false\n      formData.append(\"evnet_free\", false);\n      // 무료일때 : 1 , 광고일때 : 4\n      formData.append(\"event_type\", 4);\n\n      await axios\n        .post(createEventAPI, formData, {\n          headers\n        })\n        .then(res => {\n          console.log(\"스폰서드 이벤트 만들기 서버 응답 결과\", res);\n          if (res.data.success === 1) {\n            window.location.href = \"/Congrats\";\n            setIsLoading(false);\n          } else {\n            console.log(\"event not created\");\n            setIsLoading(false);\n          }\n        });\n    } else if (confirm) {\n      // 스폰서드 이벤트 && 체크 통과 일 때\n      // window.location.href = \"/CreateEvent/CreateDate\";\n      setIsLoading(false);\n    } else {\n      // 체크 통과하지 못했을 때\n      dispatch(openModal(true));\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Container>\n      <CalendarWrap>\n        <CalendarContainer>\n          <TitleWrap>\n            <Title>모두의 셀러에서 홍보하실 날짜를 선택해 주세요</Title>\n          </TitleWrap>\n          <ScheduleContainer>\n            <DateRangePicker />\n          </ScheduleContainer>\n        </CalendarContainer>\n        <DateSelectContainer>\n          <TitleWrap>\n            <Title>선택된 날짜</Title>\n          </TitleWrap>\n          {sponsorStartDate ? <AfterSelectDate /> : <BeforeSelectDate />}\n        </DateSelectContainer>\n      </CalendarWrap>\n      <ConfirmBtnWrap>\n        <ConfirmBtn\n          confirm={confirm}\n          onClick={() => {\n            handleCreateSponsoredEvent();\n          }}\n        >\n          확 인\n        </ConfirmBtn>\n      </ConfirmBtnWrap>\n      {isCheckModal && <CheckSponsoredEventModal />}\n      {isLoading ? <Loading /> : null}\n    </Container>\n  );\n}\n\nexport default withRouter(CreateEventDate);\n\nconst Container = styled.main`\n  /* p {\n    font-style: normal;\n    font-weight: 500;\n    font-size: 21px;\n    line-height: 25px;\n    color: #212121;\n    height: 40px;\n  } */\n  @media (max-width: 500px) {\n    margin-bottom: 100px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    /* align-items: center; */\n  }\n`;\n\nconst TitleWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  @media (max-width: 500px) {\n    padding-left: 12px;\n  }\n`;\n\nconst Title = styled.span`\n  font-weight: 500;\n  font-size: 21px;\n  color: #212121;\n  margin-bottom: 15px;\n  @media (max-width: 500px) {\n    font-size: 18px;\n  }\n`;\n\nconst CalendarWrap = styled.div`\n  display: flex;\n  flex-direction: row;\n  @media (max-width: 500px) {\n    flex-direction: column;\n  }\n`;\n\nconst CalendarContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-right: 120px;\n  @media (max-width: 500px) {\n    margin-right: 0px;\n  }\n`;\n\nconst ScheduleContainer = styled.div`\n  @media (max-width: 500px) {\n    display: flex;\n    justify-content: center;\n  }\n`;\n\nconst DateSelectContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  @media (max-width: 500px) {\n    margin-top: 50px;\n  }\n`;\n\nconst ConfirmBtnWrap = styled.div`\n  margin-top: 220px;\n  background: #f2f6ff;\n  ${({ theme }) => theme.flex(\"flex-start\", \"center\", \"row-reverse\")};\n  width: 100%;\n  @media (max-width: 500px) {\n    display: flex;\n    justify-content: center;\n    margin-top: 50px;\n  }\n`;\n\nconst ConfirmBtn = styled.button`\n  width: 208px;\n  height: 36px;\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 14px;\n  line-height: 16px;\n  text-align: center;\n  letter-spacing: 0.08em;\n  color: #ffffff;\n  background: ${({ confirm }) => (confirm ? \"#212121\" : \"#BDBDBD\")};\n  cursor: ${({ confirm }) => (confirm ? \"pointer\" : \"cursor\")};\n  @media (max-width: 500px) {\n    width: 160px;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}