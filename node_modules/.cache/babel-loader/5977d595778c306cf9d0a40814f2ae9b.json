{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject13(){var data=_taggedTemplateLiteral([\"\\n  width: 70%;\\n  height: 4vh;\\n  padding: 0 10%;\\n  border-radius: 4px;\\n  font-weight: bold;\\n  color: \",\";\\n  background-color: white;\\n  cursor: pointer;\\n  \",\";\\n\\n  span {\\n    font-size: 16px;\\n    @media (max-width: 500px) {\\n      font-size: 7px;\\n    }\\n  }\\n\"]);_templateObject13=function _templateObject13(){return data;};return data;}function _templateObject12(){var data=_taggedTemplateLiteral([\"\\n  width: 70%;\\n  height: 4vh;\\n  margin-bottom: 5%;\\n  padding: 0 10%;\\n  border-radius: 4px;\\n  font-weight: bold;\\n  background-color: white;\\n  cursor: pointer;\\n  color: \",\";\\n  \",\";\\n\\n  span {\\n    padding: 1rem 0;\\n    font-size: 16px;\\n\\n    @media (max-width: 500px) {\\n      font-size: 7px;\\n      margin-right: 6px;\\n    }\\n  }\\n\"]);_templateObject12=function _templateObject12(){return data;};return data;}function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  \",\";\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n  font-size: 11px;\\n  letter-spacing: 0.05em;\\n  line-height: 16px;\\n  color: white;\\n\\n  @media (max-width: 500px) {\\n    font-size: 9px;\\n  }\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  font-size: 24px;\\n  font-weight: bold;\\n  font-style: normal;\\n  letter-spacing: 0.08em;\\n  color: \",\";\\n  color: \",\";\\n  color: \",\";\\n\\n  @media (max-width: 500px) {\\n    font-size: 18px;\\n  }\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1.5em;\\n  font-weight: bold;\\n  color: #96a9cf;\\n\\n  @media screen and (min-width: 1800px) {\\n    font-size: 1.6em;\\n  }\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  color: \",\";\\n  color: \",\";\\n  color: \",\";\\n  \",\"\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  font-size: 1.2em;\\n  font-style: normal;\\n  font-weight: bold;\\n  letter-spacing: 0.08em;\\n  padding-top: 10px;\\n  color: \",\";\\n  color: \",\";\\n  color: \",\";\\n  color: \",\";\\n\\n  @media screen and (min-width: 1800px) {\\n    font-size: 1.3em;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1em;\\n  font-weight: 300;\\n  color: #dee8ff;\\n\\n  @media screen and (min-width: 1800px) {\\n    font-size: 1em;\\n  }\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n  \",\"\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 220px;\\n  height: 270px;\\n  border: 7px solid white;\\n  border-radius: 12px;\\n  font-size: 12px;\\n  @media (max-width: 500px) {\\n    width: 160px;\\n    height: 210px;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from\"react\";import styled from\"styled-components\";import axios from\"axios\";import qs from\"qs\";import{saveCredit,headers,getCart,generateCredit}from\"../../../Config/urls\";import{useDispatch}from\"react-redux\";import{addCart}from\"../../../modules/CartModule\";import{addDataCart}from\"../../../modules/CartDataModule\";import{buyCreditDirect}from\"../../../modules/BuyDataModule\";import useFormModal from\"../useFormModal\";import useForm from\"../../CheckOut/useForm\";function CreditsCardList(_ref){var credits=_ref.credits;var id=credits.id,packages=credits.packages,amount=credits.amount,krw=credits.krw,price=credits.price,onePrice=credits.onePrice,cartText=credits.cartText,addIcon=credits.addIcon,buyText=credits.buyText,cartIcon=credits.cartIcon,addedIcon=credits.addedIcon;var _useFormModal=useFormModal(),btnToggle=_useFormModal.btnToggle,toggle=_useFormModal.toggle;var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),cartType=_useState2[0],setCartType=_useState2[1];var EMAIL=localStorage.getItem(\"email\");var ACCESS_TOKEN=localStorage.getItem(\"access_token\");//save credit\nvar CREDIT=CREDITS_LIST[id-1].amount;var PRICE=CREDITS_LIST[id-1].price;var data=qs.stringify({email:EMAIL,price:PRICE,credit:CREDIT});//서버에 변경된 credit 값을 update한다.\nvar postCredits=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(saveCredit,data,{headers:headers}).then(getData());case 2:case\"end\":return _context.stop();}}},_callee);}));return function postCredits(){return _ref2.apply(this,arguments);};}();//카트 관련 스토어가 업데이트 되기 위함\nvar getData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(getCart,{headers:headers,params:{email:EMAIL,token:ACCESS_TOKEN}});case 2:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;dispatch(addDataCart(data.data.carts));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getData(){return _ref3.apply(this,arguments);};}();/*requestPay(결재 process) custom hook 호출을 위한 선언\n  구매하기 Button을 누르면 buyCredit 함수가 호출되고 cartType 상태가 \"\" → 2로 update되고\n  update되면서 외부에 선언된 useForm이 실행된다. 이후 setCartType(\"\") 설정하여 다시 초기화 진행*/var requestPay=useForm(cartType);var buyCredits=function buyCredits(){axios.post(generateCredit,data,{headers:headers}).then(function(res){if(res.data.success===1){var _res$data;dispatch(buyCreditDirect([(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data]));setCartType(2);setCartType(\"\");}});};var handleCartClick=function handleCartClick(){\"이거 참고해보기\";\"https://stackoverflow.com/questions/58850699/useselector-not-updating-when-store-has-changed-in-reducer-reactjs-redux\";console.log(\"이거 눌렸다\");console.log(credits);dispatch(addCart(credits));btnToggle();postCredits();};return/*#__PURE__*/React.createElement(Card,{style:CardStyle[id]},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(HeaderWrap,{style:textWrap[id]},/*#__PURE__*/React.createElement(Package,null,packages),/*#__PURE__*/React.createElement(Credit,{id:id},amount,\" \\uD3EC\\uC778\\uD2B8\")),/*#__PURE__*/React.createElement(PriceList,null,/*#__PURE__*/React.createElement(PriceWrap,{style:priceWrap[id]},/*#__PURE__*/React.createElement(Krw,null,krw),/*#__PURE__*/React.createElement(Money,{id:id},price.toLocaleString())),/*#__PURE__*/React.createElement(CreditsPrice,null,onePrice)),/*#__PURE__*/React.createElement(ButtonWrap,null,/*#__PURE__*/React.createElement(AddBtn,{onClick:function onClick(){return buyCredits();}},/*#__PURE__*/React.createElement(\"span\",null,buyText),/*#__PURE__*/React.createElement(\"img\",{alt:\"/\",src:cartIcon})))));}export default CreditsCardList;var Card=styled.div(_templateObject());var Container=styled.div(_templateObject2(),function(_ref4){var theme=_ref4.theme;return theme.flex(\"space-evenly\",\"center\",\"column\");});var HeaderWrap=styled.div(_templateObject3(),function(_ref5){var theme=_ref5.theme;return theme.flex(\"\",\"center\",\"column\");});var Package=styled.span(_templateObject4());var Credit=styled.span(_templateObject5(),function(_ref6){var id=_ref6.id;return id===1&&\"#3C66BA\";},function(_ref7){var id=_ref7.id;return id===2&&\"white\";},function(_ref8){var id=_ref8.id;return id===3&&\"white\";},function(_ref9){var id=_ref9.id;return id===4&&\"white\";});var PriceList=styled.div(_templateObject6(),function(_ref10){var id=_ref10.id;return id===1&&\"#3C66BA\";},function(_ref11){var id=_ref11.id;return id===2&&\"white\";},function(_ref12){var id=_ref12.id;return id===3&&\"white\";},function(_ref13){var id=_ref13.id;return id===4&&\"white\";},function(_ref14){var theme=_ref14.theme;return theme.flex(\"\",\"center\",\"column\");});var PriceWrap=styled.div(_templateObject7(),function(_ref15){var theme=_ref15.theme;return theme.flex(\"\",\"center\",\"\");});var Krw=styled.p(_templateObject8());var Money=styled.p(_templateObject9(),function(_ref16){var id=_ref16.id;return id===2&&\"white\";},function(_ref17){var id=_ref17.id;return id===3&&\"white\";},function(_ref18){var id=_ref18.id;return id===4&&\"white\";});var CreditsPrice=styled.p(_templateObject10());var ButtonWrap=styled.div(_templateObject11(),function(_ref19){var theme=_ref19.theme;return theme.flex(\"\",\"center\",\"column\");});var CartBtn=styled.button(_templateObject12(),function(_ref20){var toggle=_ref20.toggle;return toggle?\"green\":\"#3c66ba\";},function(_ref21){var theme=_ref21.theme;return theme.flex(\"space-between\",\"center\",\"\");});var AddBtn=styled.div(_templateObject13(),function(_ref22){var toggle=_ref22.toggle;return toggle?\"green\":\"#3c66ba\";},function(_ref23){var theme=_ref23.theme;return theme.flex(\"space-between\",\"center\",\"\");});var CardStyle={1:{background:\"linear-gradient(180deg, #e4edff 0%, #6494ff 100%)\"},2:{background:\"linear-gradient(180deg, #4180FF 0%, #00256F 100%)\"},3:{background:\"linear-gradient(180deg, #4180FF 0%, #37006F 100%)\"},4:{background:\"linear-gradient(180deg, #4180FF 0%, #000A1D 100%)\"}};var textWrap={1:{marginTop:\"12px\"}};var priceWrap={1:{marginBottom:\"12px\"}};var CREDITS_LIST=[{id:1,amount:\"10\",price:\"30000\"},{id:2,amount:\"30\",price:\"60000\"},{id:3,amount:\"50\",price:\"90000\"},{id:4,amount:\"100\",price:\"150000\"}];","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/src/Pages/Credits/Component/CreditsCardList.js"],"names":["React","useState","styled","axios","qs","saveCredit","headers","getCart","generateCredit","useDispatch","addCart","addDataCart","buyCreditDirect","useFormModal","useForm","CreditsCardList","credits","id","packages","amount","krw","price","onePrice","cartText","addIcon","buyText","cartIcon","addedIcon","btnToggle","toggle","dispatch","cartType","setCartType","EMAIL","localStorage","getItem","ACCESS_TOKEN","CREDIT","CREDITS_LIST","PRICE","data","stringify","email","credit","postCredits","post","then","getData","get","params","token","carts","requestPay","buyCredits","res","success","handleCartClick","console","log","CardStyle","textWrap","priceWrap","toLocaleString","Card","div","Container","theme","flex","HeaderWrap","Package","span","Credit","PriceList","PriceWrap","Krw","p","Money","CreditsPrice","ButtonWrap","CartBtn","button","AddBtn","background","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport {\n  saveCredit,\n  headers,\n  getCart,\n  generateCredit\n} from \"../../../Config/urls\";\nimport { useDispatch } from \"react-redux\";\nimport { addCart } from \"../../../modules/CartModule\";\nimport { addDataCart } from \"../../../modules/CartDataModule\";\nimport { buyCreditDirect } from \"../../../modules/BuyDataModule\";\nimport useFormModal from \"../useFormModal\";\nimport useForm from \"../../CheckOut/useForm\";\n\nfunction CreditsCardList({ credits }) {\n  const {\n    id,\n    packages,\n    amount,\n    krw,\n    price,\n    onePrice,\n    cartText,\n    addIcon,\n    buyText,\n    cartIcon,\n    addedIcon\n  } = credits;\n\n  const { btnToggle, toggle } = useFormModal();\n  const dispatch = useDispatch();\n  const [cartType, setCartType] = useState(\"\");\n  const EMAIL = localStorage.getItem(\"email\");\n  const ACCESS_TOKEN = localStorage.getItem(\"access_token\");\n\n  //save credit\n  const CREDIT = CREDITS_LIST[id - 1].amount;\n  const PRICE = CREDITS_LIST[id - 1].price;\n  const data = qs.stringify({ email: EMAIL, price: PRICE, credit: CREDIT });\n\n  //서버에 변경된 credit 값을 update한다.\n  const postCredits = async () => {\n    await axios\n      .post(saveCredit, data, {\n        headers\n      })\n      .then(getData());\n  };\n\n  //카트 관련 스토어가 업데이트 되기 위함\n  const getData = async () => {\n    const { data } = await axios.get(getCart, {\n      headers,\n      params: {\n        email: EMAIL,\n        token: ACCESS_TOKEN\n      }\n    });\n    dispatch(addDataCart(data.data.carts));\n  };\n\n  /*requestPay(결재 process) custom hook 호출을 위한 선언\n  구매하기 Button을 누르면 buyCredit 함수가 호출되고 cartType 상태가 \"\" → 2로 update되고\n  update되면서 외부에 선언된 useForm이 실행된다. 이후 setCartType(\"\") 설정하여 다시 초기화 진행*/\n\n  const requestPay = useForm(cartType);\n\n  const buyCredits = () => {\n    axios\n      .post(generateCredit, data, {\n        headers\n      })\n      .then(res => {\n        if (res.data.success === 1) {\n          dispatch(buyCreditDirect([res.data?.data]));\n          setCartType(2);\n          setCartType(\"\");\n        }\n      });\n  };\n\n  const handleCartClick = () => {\n    \"이거 참고해보기\";\n    \"https://stackoverflow.com/questions/58850699/useselector-not-updating-when-store-has-changed-in-reducer-reactjs-redux\";\n    console.log(\"이거 눌렸다\");\n    console.log(credits);\n    dispatch(addCart(credits));\n    btnToggle();\n    postCredits();\n  };\n\n  return (\n    <Card style={CardStyle[id]}>\n      <Container>\n        <HeaderWrap style={textWrap[id]}>\n          <Package>{packages}</Package>\n          <Credit id={id}>{amount} 포인트</Credit>\n        </HeaderWrap>\n        <PriceList>\n          <PriceWrap style={priceWrap[id]}>\n            <Krw>{krw}</Krw>\n            <Money id={id}>{price.toLocaleString()}</Money>\n          </PriceWrap>\n          <CreditsPrice>{onePrice}</CreditsPrice>\n        </PriceList>\n        <ButtonWrap>\n          {/* <CartBtn toggle={toggle} onClick={() => handleCartClick()}>\n            <span>{toggle ? \"추가\" : cartText}</span>\n            <img alt=\"/\" src={toggle ? addedIcon : addIcon} />\n          </CartBtn> */}\n          <AddBtn onClick={() => buyCredits()}>\n            <span>{buyText}</span>\n            <img alt=\"/\" src={cartIcon} />\n          </AddBtn>\n        </ButtonWrap>\n      </Container>\n    </Card>\n  );\n}\n\nexport default CreditsCardList;\n\nconst Card = styled.div`\n  width: 220px;\n  height: 270px;\n  border: 7px solid white;\n  border-radius: 12px;\n  font-size: 12px;\n  @media (max-width: 500px) {\n    width: 160px;\n    height: 210px;\n  }\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  ${({ theme }) => theme.flex(\"space-evenly\", \"center\", \"column\")}\n`;\n\nconst HeaderWrap = styled.div`\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")}\n`;\n\nconst Package = styled.span`\n  font-size: 1em;\n  font-weight: 300;\n  color: #dee8ff;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1em;\n  }\n`;\n\nconst Credit = styled.span`\n  text-align: center;\n  font-size: 1.2em;\n  font-style: normal;\n  font-weight: bold;\n  letter-spacing: 0.08em;\n  padding-top: 10px;\n  color: ${({ id }) => id === 1 && \"#3C66BA\"};\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.3em;\n  }\n`;\n\nconst PriceList = styled.div`\n  color: ${({ id }) => id === 1 && \"#3C66BA\"};\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")}\n`;\n\nconst PriceWrap = styled.div`\n  ${({ theme }) => theme.flex(\"\", \"center\", \"\")}\n`;\n\nconst Krw = styled.p`\n  font-size: 1.5em;\n  font-weight: bold;\n  color: #96a9cf;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.6em;\n  }\n`;\n\nconst Money = styled.p`\n  font-size: 24px;\n  font-weight: bold;\n  font-style: normal;\n  letter-spacing: 0.08em;\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n\n  @media (max-width: 500px) {\n    font-size: 18px;\n  }\n`;\n\nconst CreditsPrice = styled.p`\n  font-size: 11px;\n  letter-spacing: 0.05em;\n  line-height: 16px;\n  color: white;\n\n  @media (max-width: 500px) {\n    font-size: 9px;\n  }\n`;\n\nconst ButtonWrap = styled.div`\n  width: 100%;\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")};\n`;\n\nconst CartBtn = styled.button`\n  width: 70%;\n  height: 4vh;\n  margin-bottom: 5%;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  background-color: white;\n  cursor: pointer;\n  color: ${({ toggle }) => (toggle ? \"green\" : \"#3c66ba\")};\n  ${({ theme }) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    padding: 1rem 0;\n    font-size: 16px;\n\n    @media (max-width: 500px) {\n      font-size: 7px;\n      margin-right: 6px;\n    }\n  }\n`;\n\nconst AddBtn = styled.div`\n  width: 70%;\n  height: 4vh;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  color: ${({ toggle }) => (toggle ? \"green\" : \"#3c66ba\")};\n  background-color: white;\n  cursor: pointer;\n  ${({ theme }) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    font-size: 16px;\n    @media (max-width: 500px) {\n      font-size: 7px;\n    }\n  }\n`;\n\nconst CardStyle = {\n  1: { background: \"linear-gradient(180deg, #e4edff 0%, #6494ff 100%)\" },\n  2: { background: \"linear-gradient(180deg, #4180FF 0%, #00256F 100%)\" },\n  3: { background: \"linear-gradient(180deg, #4180FF 0%, #37006F 100%)\" },\n  4: { background: \"linear-gradient(180deg, #4180FF 0%, #000A1D 100%)\" }\n};\n\nconst textWrap = {\n  1: {\n    marginTop: \"12px\"\n  }\n};\n\nconst priceWrap = {\n  1: {\n    marginBottom: \"12px\"\n  }\n};\n\nconst CREDITS_LIST = [\n  {\n    id: 1,\n    amount: \"10\",\n    price: \"30000\"\n  },\n  {\n    id: 2,\n    amount: \"30\",\n    price: \"60000\"\n  },\n  {\n    id: 3,\n    amount: \"50\",\n    price: \"90000\"\n  },\n  {\n    id: 4,\n    amount: \"100\",\n    price: \"150000\"\n  }\n];\n"]},"metadata":{},"sourceType":"module"}