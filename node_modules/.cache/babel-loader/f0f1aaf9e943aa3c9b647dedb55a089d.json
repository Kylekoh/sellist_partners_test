{"ast":null,"code":"var _jsxFileName = \"/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Pages/CreateEvent/CreateEventDate/CreateEventDate.js\";\n// 기본\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Prompt } from \"react-router-dom\"; //라이브러리\n\nimport { format } from \"date-fns\";\nimport styled from \"styled-components\";\nimport axios from \"axios\"; // 컴포넌트\n\nimport DateRangePicker from \"./DateRangePicker\";\nimport BeforeSelectDate from \"./BeforeSelectDate\";\nimport AfterSelectDate from \"./AfterSelectDate\";\nimport CheckSponsoredEventModal from \"./CheckSponsoredEventModal\";\nimport { headers, createEventAPI } from \"../../../Config/urls\";\nimport { openModal } from \"../../../modules/CheckModalModule\";\n\nfunction CreateEventDate(props) {\n  const email = localStorage.getItem(\"email\");\n  const accessToken = localStorage.getItem(\"access_token\");\n  const username = useSelector(store => store.usernameReducer);\n  const userImage = useSelector(store => store.profileimgReducer);\n  const eventname = useSelector(store => store.eventnameReducer);\n  const eventimg = useSelector(store => store.eventimgReducer);\n  const eventUrl = useSelector(store => store.eventurlReducer);\n  const shoppingUrl = useSelector(store => store.shoppingurlReducer);\n  const originalPrice = useSelector(store => store.originalpriceReducer);\n  const newPrice = useSelector(store => store.newpriceReducer);\n  const durationStart = useSelector(store => store.durationStartReducer);\n  const durationEnd = useSelector(store => store.durationEndReducer);\n  const category = useSelector(store => store.eventcategoryReducer);\n  const isCheckModal = useSelector(store => store.checkModalReducer);\n  const notEnoughPoint = useSelector(store => store.notenoughReducer);\n  const dispatch = useDispatch();\n  const sponsorStartDate = useSelector(store => store.sponsorStartDateReducer);\n  const sponsorEndDate = useSelector(store => store.sponsorEndDateReducer);\n  const difference = sponsorEndDate - sponsorStartDate;\n  const days = Math.floor(difference / (1000 * 60 * 60 * 24) + 1);\n  const totalCredits = days * 10; // 01.19 새로 만든 것\n\n  const [confirm, setConfirm] = useState(false);\n  useEffect(() => {\n    console.log(\"크리에이트 아이템 페이지에서 오는 것\");\n    console.log(\"사용자\", username);\n    console.log(\"사용자 사진\", userImage);\n    console.log(\"이벤트명\", eventname);\n    console.log(\"이벤트 사진\", eventimg);\n    console.log(\"이벤트 URL\", eventUrl);\n    console.log(\"쇼핑URL\", shoppingUrl);\n    console.log(\"원래가격\", originalPrice);\n    console.log(\"할인가격\", newPrice);\n    console.log(\"이벤트 시작\", durationStart);\n    console.log(\"이벤트 종료\", durationEnd);\n    console.log(\"카테고리\", category);\n  }, []);\n  useEffect(() => {\n    // 각 항목을 Validation해서  confirm 버튼 활성 유무를 결정하기 위한 것\n    if (notEnoughPoint) {\n      setConfirm(true);\n    } else {\n      setConfirm(false);\n    }\n  }, [notEnoughPoint]);\n  useEffect(() => {\n    console.log(\"크리에이트 데이트 유저 네임\", username);\n    console.log(\"크리에이트 데이트 이벤트 네임\", eventname);\n    console.log(\"체크 모달\", isCheckModal);\n    console.log(sponsorStartDate);\n    console.log(sponsorEndDate);\n  }, []); // 이벤트 생성 하는 함수\n\n  const handleCreateSponsoredEvent = async () => {\n    if (confirm) {\n      // 무료 이벤트 && 체트 통과 일 때\n      const formData = new FormData();\n      formData.append(\"event_image\", eventimg);\n      formData.append(\"user_image\", userImage);\n      formData.append(\"username\", username);\n      formData.append(\"event_name\", eventname);\n      formData.append(\"event_url\", eventUrl);\n      formData.append(\"event_external_link\", shoppingUrl);\n      formData.append(\"event_original_price\", originalPrice);\n      formData.append(\"event_sale_price\", newPrice);\n      formData.append(\"event_platform\", \"instagram\");\n      formData.append(\"event_duration\", `${format(durationStart, `MM/d`)} - ${format(durationEnd, `MM/d`)}`);\n      formData.append(\"event_category\", category); // 광고 시작일, 종료일\n\n      formData.append(\"event_start\", sponsorStartDate);\n      formData.append(\"event_end\", sponsorEndDate);\n      formData.append(); // 무료기 때문에 크레딧은 '0'로\n\n      formData.append(\"event_credit\", totalCredits); // 무료일때 true 광고일때 : false\n\n      formData.append(\"evnet_free\", false); // 무료일때 : 1 , 광고일때 : 4\n\n      formData.append(\"event_type\", 4);\n      await axios.post(createEventAPI, formData, {\n        headers\n      }).then(res => {\n        if (res.data.success === 1) {\n          window.location.href = \"/Congrats\";\n        } else {\n          console.log(\"event not created\");\n        }\n      });\n    } else if (confirm) {// 스폰서드 이벤트 && 체크 통과 일 때\n      // window.location.href = \"/CreateEvent/CreateDate\";\n    } else {\n      // 체크 통과하지 못했을 때\n      dispatch(openModal(true));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CalendarWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CalendarContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \"\\uBAA8\\uB450\\uC758 \\uC140\\uB7EC\\uC5D0\\uC11C \\uD64D\\uBCF4\\uD558\\uC2E4 \\uB0A0\\uC9DC\\uB97C \\uC120\\uD0DD\\uD574 \\uC8FC\\uC138\\uC694\")), /*#__PURE__*/React.createElement(ScheduleContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DateRangePicker, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(DateSelectContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, \"\\uC120\\uD0DD\\uB41C \\uB0A0\\uC9DC\")), sponsorStartDate ? /*#__PURE__*/React.createElement(AfterSelectDate, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 31\n    }\n  }) : /*#__PURE__*/React.createElement(BeforeSelectDate, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 53\n    }\n  }))), /*#__PURE__*/React.createElement(ConfirmBtnWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmBtn, {\n    confirm: confirm,\n    onClick: () => {\n      handleCreateSponsoredEvent();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, \"\\uD655 \\uC778\")), isCheckModal && /*#__PURE__*/React.createElement(CheckSponsoredEventModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 24\n    }\n  }));\n}\n\nexport default CreateEventDate;\nconst Container = styled.main`\n  margin-top: 260px;\n\n  ${({\n  theme\n}) => theme.flex(\"flex-start\", \"flex-start\", \"column\")};\n\n  p {\n    font-style: normal;\n    font-weight: 500;\n    font-size: 21px;\n    line-height: 25px;\n    color: #212121;\n    height: 40px;\n  }\n`;\nconst TitleWrap = styled.div`\n  ${({\n  theme\n}) => theme.flex(\"space-between\", \"space-between\", \"column\")};\n  @media screen and (min-width: 1200px) {\n    padding-bottom: 13px;\n  }\n`;\nconst Title = styled.span`\n  font-weight: 500;\n  font-size: 21px;\n  color: #212121;\n  margin-bottom: 15px;\n`;\nconst CalendarWrap = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\nconst CalendarContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-right: 120px;\n`;\nconst ScheduleContainer = styled.div``;\nconst DateSelectContainer = styled.div``;\nconst ConfirmBtnWrap = styled.div`\n  margin-top: 220px;\n  background: #f2f6ff;\n  ${({\n  theme\n}) => theme.flex(\"flex-start\", \"center\", \"row-reverse\")};\n  width: 100%;\n`;\nconst ConfirmBtn = styled.button`\n  width: 208px;\n  height: 36px;\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 14px;\n  line-height: 16px;\n  text-align: center;\n  letter-spacing: 0.08em;\n  color: #ffffff;\n  background: ${({\n  confirm\n}) => confirm ? \"#212121\" : \"#BDBDBD\"};\n  cursor: ${({\n  confirm\n}) => confirm ? \"pointer\" : \"cursor\"};\n`;","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Pages/CreateEvent/CreateEventDate/CreateEventDate.js"],"names":["React","useState","useEffect","useSelector","useDispatch","Prompt","format","styled","axios","DateRangePicker","BeforeSelectDate","AfterSelectDate","CheckSponsoredEventModal","headers","createEventAPI","openModal","CreateEventDate","props","email","localStorage","getItem","accessToken","username","store","usernameReducer","userImage","profileimgReducer","eventname","eventnameReducer","eventimg","eventimgReducer","eventUrl","eventurlReducer","shoppingUrl","shoppingurlReducer","originalPrice","originalpriceReducer","newPrice","newpriceReducer","durationStart","durationStartReducer","durationEnd","durationEndReducer","category","eventcategoryReducer","isCheckModal","checkModalReducer","notEnoughPoint","notenoughReducer","dispatch","sponsorStartDate","sponsorStartDateReducer","sponsorEndDate","sponsorEndDateReducer","difference","days","Math","floor","totalCredits","confirm","setConfirm","console","log","handleCreateSponsoredEvent","formData","FormData","append","post","then","res","data","success","window","location","href","Container","main","theme","flex","TitleWrap","div","Title","span","CalendarWrap","CalendarContainer","ScheduleContainer","DateSelectContainer","ConfirmBtnWrap","ConfirmBtn","button"],"mappings":"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","sourcesContent":["// 기본\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Prompt } from \"react-router-dom\";\n//라이브러리\nimport { format } from \"date-fns\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\n// 컴포넌트\nimport DateRangePicker from \"./DateRangePicker\";\nimport BeforeSelectDate from \"./BeforeSelectDate\";\nimport AfterSelectDate from \"./AfterSelectDate\";\nimport CheckSponsoredEventModal from \"./CheckSponsoredEventModal\";\nimport { headers, createEventAPI } from \"../../../Config/urls\";\nimport { openModal } from \"../../../modules/CheckModalModule\";\n\nfunction CreateEventDate(props) {\n  const email = localStorage.getItem(\"email\");\n  const accessToken = localStorage.getItem(\"access_token\");\n  const username = useSelector(store => store.usernameReducer);\n  const userImage = useSelector(store => store.profileimgReducer);\n  const eventname = useSelector(store => store.eventnameReducer);\n  const eventimg = useSelector(store => store.eventimgReducer);\n\n  const eventUrl = useSelector(store => store.eventurlReducer);\n  const shoppingUrl = useSelector(store => store.shoppingurlReducer);\n  const originalPrice = useSelector(store => store.originalpriceReducer);\n  const newPrice = useSelector(store => store.newpriceReducer);\n  const durationStart = useSelector(store => store.durationStartReducer);\n  const durationEnd = useSelector(store => store.durationEndReducer);\n  const category = useSelector(store => store.eventcategoryReducer);\n  const isCheckModal = useSelector(store => store.checkModalReducer);\n\n  const notEnoughPoint = useSelector(store => store.notenoughReducer);\n  const dispatch = useDispatch();\n\n  const sponsorStartDate = useSelector(store => store.sponsorStartDateReducer);\n  const sponsorEndDate = useSelector(store => store.sponsorEndDateReducer);\n\n  const difference = sponsorEndDate - sponsorStartDate;\n  const days = Math.floor(difference / (1000 * 60 * 60 * 24) + 1);\n  const totalCredits = days * 10;\n\n  // 01.19 새로 만든 것\n  const [confirm, setConfirm] = useState(false);\n\n  useEffect(() => {\n    console.log(\"크리에이트 아이템 페이지에서 오는 것\");\n    console.log(\"사용자\", username);\n    console.log(\"사용자 사진\", userImage);\n    console.log(\"이벤트명\", eventname);\n    console.log(\"이벤트 사진\", eventimg);\n    console.log(\"이벤트 URL\", eventUrl);\n    console.log(\"쇼핑URL\", shoppingUrl);\n    console.log(\"원래가격\", originalPrice);\n    console.log(\"할인가격\", newPrice);\n    console.log(\"이벤트 시작\", durationStart);\n    console.log(\"이벤트 종료\", durationEnd);\n    console.log(\"카테고리\", category);\n  }, []);\n\n  useEffect(() => {\n    // 각 항목을 Validation해서  confirm 버튼 활성 유무를 결정하기 위한 것\n    if (notEnoughPoint) {\n      setConfirm(true);\n    } else {\n      setConfirm(false);\n    }\n  }, [notEnoughPoint]);\n\n  useEffect(() => {\n    console.log(\"크리에이트 데이트 유저 네임\", username);\n    console.log(\"크리에이트 데이트 이벤트 네임\", eventname);\n    console.log(\"체크 모달\", isCheckModal);\n    console.log(sponsorStartDate);\n    console.log(sponsorEndDate);\n  }, []);\n\n  // 이벤트 생성 하는 함수\n  const handleCreateSponsoredEvent = async () => {\n    if (confirm) {\n      // 무료 이벤트 && 체트 통과 일 때\n      const formData = new FormData();\n      formData.append(\"event_image\", eventimg);\n      formData.append(\"user_image\", userImage);\n      formData.append(\"username\", username);\n      formData.append(\"event_name\", eventname);\n      formData.append(\"event_url\", eventUrl);\n      formData.append(\"event_external_link\", shoppingUrl);\n      formData.append(\"event_original_price\", originalPrice);\n      formData.append(\"event_sale_price\", newPrice);\n      formData.append(\"event_platform\", \"instagram\");\n      formData.append(\n        \"event_duration\",\n        `${format(durationStart, `MM/d`)} - ${format(durationEnd, `MM/d`)}`\n      );\n      formData.append(\"event_category\", category);\n      // 광고 시작일, 종료일\n      formData.append(\"event_start\", sponsorStartDate);\n      formData.append(\"event_end\", sponsorEndDate);\n      formData.append();\n      // 무료기 때문에 크레딧은 '0'로\n      formData.append(\"event_credit\", totalCredits);\n      // 무료일때 true 광고일때 : false\n      formData.append(\"evnet_free\", false);\n      // 무료일때 : 1 , 광고일때 : 4\n      formData.append(\"event_type\", 4);\n\n      await axios\n        .post(createEventAPI, formData, {\n          headers\n        })\n        .then(res => {\n          if (res.data.success === 1) {\n            window.location.href = \"/Congrats\";\n          } else {\n            console.log(\"event not created\");\n          }\n        });\n    } else if (confirm) {\n      // 스폰서드 이벤트 && 체크 통과 일 때\n      // window.location.href = \"/CreateEvent/CreateDate\";\n    } else {\n      // 체크 통과하지 못했을 때\n      dispatch(openModal(true));\n    }\n  };\n\n  return (\n    <Container>\n      <CalendarWrap>\n        <CalendarContainer>\n          <TitleWrap>\n            <Title>모두의 셀러에서 홍보하실 날짜를 선택해 주세요</Title>\n          </TitleWrap>\n          <ScheduleContainer>\n            <DateRangePicker />\n          </ScheduleContainer>\n        </CalendarContainer>\n        <DateSelectContainer>\n          <TitleWrap>\n            <Title>선택된 날짜</Title>\n          </TitleWrap>\n          {sponsorStartDate ? <AfterSelectDate /> : <BeforeSelectDate />}\n        </DateSelectContainer>\n      </CalendarWrap>\n      <ConfirmBtnWrap>\n        <ConfirmBtn\n          confirm={confirm}\n          onClick={() => {\n            handleCreateSponsoredEvent();\n          }}\n        >\n          확 인\n        </ConfirmBtn>\n      </ConfirmBtnWrap>\n      {isCheckModal && <CheckSponsoredEventModal />}\n    </Container>\n  );\n}\n\nexport default CreateEventDate;\n\nconst Container = styled.main`\n  margin-top: 260px;\n\n  ${({ theme }) => theme.flex(\"flex-start\", \"flex-start\", \"column\")};\n\n  p {\n    font-style: normal;\n    font-weight: 500;\n    font-size: 21px;\n    line-height: 25px;\n    color: #212121;\n    height: 40px;\n  }\n`;\n\nconst TitleWrap = styled.div`\n  ${({ theme }) => theme.flex(\"space-between\", \"space-between\", \"column\")};\n  @media screen and (min-width: 1200px) {\n    padding-bottom: 13px;\n  }\n`;\n\nconst Title = styled.span`\n  font-weight: 500;\n  font-size: 21px;\n  color: #212121;\n  margin-bottom: 15px;\n`;\n\nconst CalendarWrap = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst CalendarContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-right: 120px;\n`;\n\nconst ScheduleContainer = styled.div``;\n\nconst DateSelectContainer = styled.div``;\n\nconst ConfirmBtnWrap = styled.div`\n  margin-top: 220px;\n  background: #f2f6ff;\n  ${({ theme }) => theme.flex(\"flex-start\", \"center\", \"row-reverse\")};\n  width: 100%;\n`;\n\nconst ConfirmBtn = styled.button`\n  width: 208px;\n  height: 36px;\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 14px;\n  line-height: 16px;\n  text-align: center;\n  letter-spacing: 0.08em;\n  color: #ffffff;\n  background: ${({ confirm }) => (confirm ? \"#212121\" : \"#BDBDBD\")};\n  cursor: ${({ confirm }) => (confirm ? \"pointer\" : \"cursor\")};\n`;\n"]},"metadata":{},"sourceType":"module"}