{"ast":null,"code":"var _jsxFileName = \"/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Pages/Credits/Component/CreditsCardList.js\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { saveCredit, headers, getCart, generateCredit } from \"../../../Config/urls\";\nimport { useDispatch } from \"react-redux\";\nimport { addCart } from \"../../../modules/CartModule\";\nimport { addDataCart } from \"../../../modules/CartDataModule\";\nimport { buyCreditDirect } from \"../../../modules/BuyDataModule\";\nimport useFormModal from \"../useFormModal\";\nimport useForm from \"../../CheckOut/useForm\";\n\nfunction CreditsCardList({\n  credits\n}) {\n  const {\n    id,\n    packages,\n    amount,\n    krw,\n    price,\n    onePrice,\n    cartText,\n    addIcon,\n    buyText,\n    cartIcon,\n    addedIcon\n  } = credits;\n  const {\n    btnToggle,\n    toggle\n  } = useFormModal();\n  const dispatch = useDispatch();\n  const [cartType, setCartType] = useState(\"\");\n  const EMAIL = localStorage.getItem(\"email\");\n  const ACCESS_TOKEN = localStorage.getItem(\"access_token\"); //save credit\n\n  const CREDIT = CREDITS_LIST[id - 1].amount;\n  const PRICE = CREDITS_LIST[id - 1].price;\n  const data = qs.stringify({\n    email: EMAIL,\n    price: PRICE,\n    credit: CREDIT\n  }); //서버에 변경된 credit 값을 update한다.\n\n  const postCredits = async () => {\n    await axios.post(saveCredit, data, {\n      headers\n    }).then(getData());\n  }; //카트 관련 스토어가 업데이트 되기 위함\n\n\n  const getData = async () => {\n    const {\n      data\n    } = await axios.get(getCart, {\n      headers,\n      params: {\n        email: EMAIL,\n        token: ACCESS_TOKEN\n      }\n    });\n    dispatch(addDataCart(data.data.carts));\n  };\n  /*requestPay(결재 process) custom hook 호출을 위한 선언\n  구매하기 Button을 누르면 buyCredit 함수가 호출되고 cartType 상태가 \"\" → 2로 update되고\n  update되면서 외부에 선언된 useForm이 실행된다. 이후 setCartType(\"\") 설정하여 다시 초기화 진행*/\n\n\n  const requestPay = useForm(cartType);\n\n  const buyCredits = () => {\n    axios.post(generateCredit, data, {\n      headers\n    }).then(res => {\n      if (res.data.success === 1) {\n        var _res$data;\n\n        dispatch(buyCreditDirect([(_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data]));\n        setCartType(2);\n        setCartType(\"\");\n      }\n    });\n  };\n\n  const handleCartClick = () => {\n    \"이거 참고해보기\";\n    \"https://stackoverflow.com/questions/58850699/useselector-not-updating-when-store-has-changed-in-reducer-reactjs-redux\";\n\n    console.log(\"이거 눌렸다\");\n    console.log(credits);\n    dispatch(addCart(credits));\n    btnToggle();\n    postCredits();\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    style: CardStyle[id],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(HeaderWrap, {\n    style: textWrap[id],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Package, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, packages), /*#__PURE__*/React.createElement(Credit, {\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, amount, \" \\uD3EC\\uC778\\uD2B8\")), /*#__PURE__*/React.createElement(PriceList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PriceWrap, {\n    style: priceWrap[id],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Krw, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, krw), /*#__PURE__*/React.createElement(Money, {\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, price.toLocaleString())), /*#__PURE__*/React.createElement(CreditsPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, onePrice)), /*#__PURE__*/React.createElement(ButtonWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AddBtn, {\n    onClick: () => buyCredits(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, buyText), /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"/\",\n    src: cartIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default CreditsCardList;\nconst Card = styled.div`\n  width: 220px;\n  height: 270px;\n  border: 7px solid white;\n  border-radius: 12px;\n  font-size: 12px;\n  @media (max-width: 500px) {\n    width: 160px;\n    height: 210px;\n  }\n`;\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  ${({\n  theme\n}) => theme.flex(\"space-evenly\", \"center\", \"column\")}\n`;\nconst HeaderWrap = styled.div`\n  ${({\n  theme\n}) => theme.flex(\"\", \"center\", \"column\")}\n`;\nconst Package = styled.span`\n  font-size: 1em;\n  font-weight: 300;\n  color: #dee8ff;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1em;\n  }\n`;\nconst Credit = styled.span`\n  text-align: center;\n  font-size: 1.2em;\n  font-style: normal;\n  font-weight: bold;\n  letter-spacing: 0.08em;\n  padding-top: 10px;\n  color: ${({\n  id\n}) => id === 1 && \"#3C66BA\"};\n  color: ${({\n  id\n}) => id === 2 && \"white\"};\n  color: ${({\n  id\n}) => id === 3 && \"white\"};\n  color: ${({\n  id\n}) => id === 4 && \"white\"};\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.3em;\n  }\n`;\nconst PriceList = styled.div`\n  color: ${({\n  id\n}) => id === 1 && \"#3C66BA\"};\n  color: ${({\n  id\n}) => id === 2 && \"white\"};\n  color: ${({\n  id\n}) => id === 3 && \"white\"};\n  color: ${({\n  id\n}) => id === 4 && \"white\"};\n  ${({\n  theme\n}) => theme.flex(\"\", \"center\", \"column\")}\n`;\nconst PriceWrap = styled.div`\n  ${({\n  theme\n}) => theme.flex(\"\", \"center\", \"\")}\n`;\nconst Krw = styled.p`\n  font-size: 1.5em;\n  font-weight: bold;\n  color: #96a9cf;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.6em;\n  }\n`;\nconst Money = styled.p`\n  font-size: 24px;\n  font-weight: bold;\n  font-style: normal;\n  letter-spacing: 0.08em;\n  color: ${({\n  id\n}) => id === 2 && \"white\"};\n  color: ${({\n  id\n}) => id === 3 && \"white\"};\n  color: ${({\n  id\n}) => id === 4 && \"white\"};\n\n  @media (max-width: 500px) {\n    font-size: 18px;\n  }\n`;\nconst CreditsPrice = styled.p`\n  font-size: 11px;\n  letter-spacing: 0.05em;\n  line-height: 16px;\n  color: white;\n\n  @media (max-width: 500px) {\n    font-size: 9px;\n  }\n`;\nconst ButtonWrap = styled.div`\n  width: 100%;\n  ${({\n  theme\n}) => theme.flex(\"\", \"center\", \"column\")};\n`;\nconst CartBtn = styled.button`\n  width: 70%;\n  height: 4vh;\n  margin-bottom: 5%;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  background-color: white;\n  cursor: pointer;\n  color: ${({\n  toggle\n}) => toggle ? \"green\" : \"#3c66ba\"};\n  ${({\n  theme\n}) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    padding: 1rem 0;\n    font-size: 16px;\n\n    @media (max-width: 500px) {\n      font-size: 7px;\n      margin-right: 6px;\n    }\n  }\n`;\nconst AddBtn = styled.div`\n  width: 70%;\n  height: 4vh;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  color: ${({\n  toggle\n}) => toggle ? \"green\" : \"#3c66ba\"};\n  background-color: white;\n  cursor: pointer;\n  ${({\n  theme\n}) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    font-size: 16px;\n    @media (max-width: 500px) {\n      font-size: 7px;\n    }\n  }\n`;\nconst CardStyle = {\n  1: {\n    background: \"linear-gradient(180deg, #e4edff 0%, #6494ff 100%)\"\n  },\n  2: {\n    background: \"linear-gradient(180deg, #4180FF 0%, #00256F 100%)\"\n  },\n  3: {\n    background: \"linear-gradient(180deg, #4180FF 0%, #37006F 100%)\"\n  },\n  4: {\n    background: \"linear-gradient(180deg, #4180FF 0%, #000A1D 100%)\"\n  }\n};\nconst textWrap = {\n  1: {\n    marginTop: \"12px\"\n  }\n};\nconst priceWrap = {\n  1: {\n    marginBottom: \"12px\"\n  }\n};\nconst CREDITS_LIST = [{\n  id: 1,\n  amount: \"10\",\n  price: \"50000\"\n}, {\n  id: 2,\n  amount: \"30\",\n  price: \"100000\"\n}, {\n  id: 3,\n  amount: \"50\",\n  price: \"150000\"\n}, {\n  id: 4,\n  amount: \"100\",\n  price: \"250000\"\n}];","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Pages/Credits/Component/CreditsCardList.js"],"names":["React","useState","styled","axios","qs","saveCredit","headers","getCart","generateCredit","useDispatch","addCart","addDataCart","buyCreditDirect","useFormModal","useForm","CreditsCardList","credits","id","packages","amount","krw","price","onePrice","cartText","addIcon","buyText","cartIcon","addedIcon","btnToggle","toggle","dispatch","cartType","setCartType","EMAIL","localStorage","getItem","ACCESS_TOKEN","CREDIT","CREDITS_LIST","PRICE","data","stringify","email","credit","postCredits","post","then","getData","get","params","token","carts","requestPay","buyCredits","res","success","handleCartClick","console","log","CardStyle","textWrap","priceWrap","toLocaleString","Card","div","Container","theme","flex","HeaderWrap","Package","span","Credit","PriceList","PriceWrap","Krw","p","Money","CreditsPrice","ButtonWrap","CartBtn","button","AddBtn","background","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport {\n  saveCredit,\n  headers,\n  getCart,\n  generateCredit\n} from \"../../../Config/urls\";\nimport { useDispatch } from \"react-redux\";\nimport { addCart } from \"../../../modules/CartModule\";\nimport { addDataCart } from \"../../../modules/CartDataModule\";\nimport { buyCreditDirect } from \"../../../modules/BuyDataModule\";\nimport useFormModal from \"../useFormModal\";\nimport useForm from \"../../CheckOut/useForm\";\n\nfunction CreditsCardList({ credits }) {\n  const {\n    id,\n    packages,\n    amount,\n    krw,\n    price,\n    onePrice,\n    cartText,\n    addIcon,\n    buyText,\n    cartIcon,\n    addedIcon\n  } = credits;\n\n  const { btnToggle, toggle } = useFormModal();\n  const dispatch = useDispatch();\n  const [cartType, setCartType] = useState(\"\");\n  const EMAIL = localStorage.getItem(\"email\");\n  const ACCESS_TOKEN = localStorage.getItem(\"access_token\");\n\n  //save credit\n  const CREDIT = CREDITS_LIST[id - 1].amount;\n  const PRICE = CREDITS_LIST[id - 1].price;\n  const data = qs.stringify({ email: EMAIL, price: PRICE, credit: CREDIT });\n\n  //서버에 변경된 credit 값을 update한다.\n  const postCredits = async () => {\n    await axios\n      .post(saveCredit, data, {\n        headers\n      })\n      .then(getData());\n  };\n\n  //카트 관련 스토어가 업데이트 되기 위함\n  const getData = async () => {\n    const { data } = await axios.get(getCart, {\n      headers,\n      params: {\n        email: EMAIL,\n        token: ACCESS_TOKEN\n      }\n    });\n    dispatch(addDataCart(data.data.carts));\n  };\n\n  /*requestPay(결재 process) custom hook 호출을 위한 선언\n  구매하기 Button을 누르면 buyCredit 함수가 호출되고 cartType 상태가 \"\" → 2로 update되고\n  update되면서 외부에 선언된 useForm이 실행된다. 이후 setCartType(\"\") 설정하여 다시 초기화 진행*/\n\n  const requestPay = useForm(cartType);\n\n  const buyCredits = () => {\n    axios\n      .post(generateCredit, data, {\n        headers\n      })\n      .then(res => {\n        if (res.data.success === 1) {\n          dispatch(buyCreditDirect([res.data?.data]));\n          setCartType(2);\n          setCartType(\"\");\n        }\n      });\n  };\n\n  const handleCartClick = () => {\n    \"이거 참고해보기\";\n    \"https://stackoverflow.com/questions/58850699/useselector-not-updating-when-store-has-changed-in-reducer-reactjs-redux\";\n    console.log(\"이거 눌렸다\");\n    console.log(credits);\n    dispatch(addCart(credits));\n    btnToggle();\n    postCredits();\n  };\n\n  return (\n    <Card style={CardStyle[id]}>\n      <Container>\n        <HeaderWrap style={textWrap[id]}>\n          <Package>{packages}</Package>\n          <Credit id={id}>{amount} 포인트</Credit>\n        </HeaderWrap>\n        <PriceList>\n          <PriceWrap style={priceWrap[id]}>\n            <Krw>{krw}</Krw>\n            <Money id={id}>{price.toLocaleString()}</Money>\n          </PriceWrap>\n          <CreditsPrice>{onePrice}</CreditsPrice>\n        </PriceList>\n        <ButtonWrap>\n          {/* <CartBtn toggle={toggle} onClick={() => handleCartClick()}>\n            <span>{toggle ? \"추가\" : cartText}</span>\n            <img alt=\"/\" src={toggle ? addedIcon : addIcon} />\n          </CartBtn> */}\n          <AddBtn onClick={() => buyCredits()}>\n            <span>{buyText}</span>\n            <img alt=\"/\" src={cartIcon} />\n          </AddBtn>\n        </ButtonWrap>\n      </Container>\n    </Card>\n  );\n}\n\nexport default CreditsCardList;\n\nconst Card = styled.div`\n  width: 220px;\n  height: 270px;\n  border: 7px solid white;\n  border-radius: 12px;\n  font-size: 12px;\n  @media (max-width: 500px) {\n    width: 160px;\n    height: 210px;\n  }\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  ${({ theme }) => theme.flex(\"space-evenly\", \"center\", \"column\")}\n`;\n\nconst HeaderWrap = styled.div`\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")}\n`;\n\nconst Package = styled.span`\n  font-size: 1em;\n  font-weight: 300;\n  color: #dee8ff;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1em;\n  }\n`;\n\nconst Credit = styled.span`\n  text-align: center;\n  font-size: 1.2em;\n  font-style: normal;\n  font-weight: bold;\n  letter-spacing: 0.08em;\n  padding-top: 10px;\n  color: ${({ id }) => id === 1 && \"#3C66BA\"};\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.3em;\n  }\n`;\n\nconst PriceList = styled.div`\n  color: ${({ id }) => id === 1 && \"#3C66BA\"};\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")}\n`;\n\nconst PriceWrap = styled.div`\n  ${({ theme }) => theme.flex(\"\", \"center\", \"\")}\n`;\n\nconst Krw = styled.p`\n  font-size: 1.5em;\n  font-weight: bold;\n  color: #96a9cf;\n\n  @media screen and (min-width: 1800px) {\n    font-size: 1.6em;\n  }\n`;\n\nconst Money = styled.p`\n  font-size: 24px;\n  font-weight: bold;\n  font-style: normal;\n  letter-spacing: 0.08em;\n  color: ${({ id }) => id === 2 && \"white\"};\n  color: ${({ id }) => id === 3 && \"white\"};\n  color: ${({ id }) => id === 4 && \"white\"};\n\n  @media (max-width: 500px) {\n    font-size: 18px;\n  }\n`;\n\nconst CreditsPrice = styled.p`\n  font-size: 11px;\n  letter-spacing: 0.05em;\n  line-height: 16px;\n  color: white;\n\n  @media (max-width: 500px) {\n    font-size: 9px;\n  }\n`;\n\nconst ButtonWrap = styled.div`\n  width: 100%;\n  ${({ theme }) => theme.flex(\"\", \"center\", \"column\")};\n`;\n\nconst CartBtn = styled.button`\n  width: 70%;\n  height: 4vh;\n  margin-bottom: 5%;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  background-color: white;\n  cursor: pointer;\n  color: ${({ toggle }) => (toggle ? \"green\" : \"#3c66ba\")};\n  ${({ theme }) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    padding: 1rem 0;\n    font-size: 16px;\n\n    @media (max-width: 500px) {\n      font-size: 7px;\n      margin-right: 6px;\n    }\n  }\n`;\n\nconst AddBtn = styled.div`\n  width: 70%;\n  height: 4vh;\n  padding: 0 10%;\n  border-radius: 4px;\n  font-weight: bold;\n  color: ${({ toggle }) => (toggle ? \"green\" : \"#3c66ba\")};\n  background-color: white;\n  cursor: pointer;\n  ${({ theme }) => theme.flex(\"space-between\", \"center\", \"\")};\n\n  span {\n    font-size: 16px;\n    @media (max-width: 500px) {\n      font-size: 7px;\n    }\n  }\n`;\n\nconst CardStyle = {\n  1: { background: \"linear-gradient(180deg, #e4edff 0%, #6494ff 100%)\" },\n  2: { background: \"linear-gradient(180deg, #4180FF 0%, #00256F 100%)\" },\n  3: { background: \"linear-gradient(180deg, #4180FF 0%, #37006F 100%)\" },\n  4: { background: \"linear-gradient(180deg, #4180FF 0%, #000A1D 100%)\" }\n};\n\nconst textWrap = {\n  1: {\n    marginTop: \"12px\"\n  }\n};\n\nconst priceWrap = {\n  1: {\n    marginBottom: \"12px\"\n  }\n};\n\nconst CREDITS_LIST = [\n  {\n    id: 1,\n    amount: \"10\",\n    price: \"50000\"\n  },\n  {\n    id: 2,\n    amount: \"30\",\n    price: \"100000\"\n  },\n  {\n    id: 3,\n    amount: \"50\",\n    price: \"150000\"\n  },\n  {\n    id: 4,\n    amount: \"100\",\n    price: \"250000\"\n  }\n];\n"]},"metadata":{},"sourceType":"module"}