{"ast":null,"code":"var _jsxFileName = \"/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Components/homeComponents/LogIn.js\";\nimport React, { useState } from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { SnackbarContent } from \"@material-ui/core\";\nimport { logInApi, TOKEN } from \"../../Config/urls\";\nimport { footerBox } from \"../../Config/commonStyles\";\nimport Loading from \"../../../src/Components/Loading\";\nimport styled from \"styled-components\";\nimport Close from \"../../Images/Close\";\nimport Visiblility from \"../../Images/Visibility\";\nimport VisibilityOff from \"../../Images/VisibilityOff\";\n\nfunction LogIn(props) {\n  const propsFromHome = props.props;\n  const [loginstate, setLogInState] = useState({\n    logInEmail: \"\",\n    logInPassword: \"\"\n  });\n  const {\n    logInEmail,\n    logInPassword\n  } = loginstate;\n  const isLoginBtnActive = !(logInEmail.length > 0 && logInPassword.length > 0);\n  const emailFilled = logInEmail.length > 0;\n  const pwFilled = logInPassword.length > 0;\n  const [error1, setError1] = useState(false); //올바른 이메일이 아닙니다.\n\n  const [error2, setError2] = useState(false); //계정존재 XX\n\n  const [error3, setError3] = useState(false); //비밀번호 일치 X\n\n  const [pwvisibility, setPwVisibility] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [loading, setLoading] = useState(null); //Loading spinner\n\n  const regEmail = /^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i;\n\n  function inputLogin(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setLogInState(prevState => ({ ...prevState,\n      [name]: value\n    }));\n\n    if (value === \"\") {\n      setError1(false);\n      setError2(false);\n      setError3(false);\n    }\n  }\n\n  function btnLogin() {\n    const {\n      logInEmail,\n      logInPassword\n    } = loginstate;\n    const formData = new FormData();\n    formData.append(\"email\", logInEmail);\n    formData.append(\"password\", logInPassword);\n\n    if (!regEmail.test(logInEmail)) {\n      setError1(true);\n    } else {\n      setLoading(true);\n      console.log(\"ee\", loading);\n      fetch(logInApi, {\n        method: \"POST\",\n        headers: {\n          Authorization: TOKEN\n        },\n        body: formData\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        return res;\n      }).then(res => {\n        if (res.success === 1) {\n          // 로그인성공;\n          setLoading(false);\n          localStorage.setItem(\"access_token\", res.data.access_token);\n          localStorage.setItem(\"email\", res.data.email);\n          localStorage.setItem(\"new_user\", res.data.new_user);\n          setUserName(res.data.name);\n          res.data.access_token ? setOpen(true)(window.location.href = \"/CreateEvent\") : alert(\"로그인 실패!\");\n        } else if (res.error.type === 3) {\n          setLoading(false);\n          setError2(true); //계정존재 XX\n        } else if (res.error.type === 4) {\n          setLoading(false);\n          setError3(true); //비밀번호 일치 X\n        }\n      });\n    }\n  }\n\n  function closeIcon(param) {\n    if (param === \"email\") {\n      setLogInState(prevState => ({ ...prevState,\n        logInEmail: \"\"\n      }));\n      setError1(false);\n      setError2(false);\n    }\n  }\n\n  function eyeIcon() {\n    setPwVisibility(!pwvisibility);\n  }\n\n  const checkEnter = e => {\n    if (e.keyCode === 13) {\n      btnLogin();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(LoginInputBox, {\n    error1: error1,\n    error2: error2,\n    error3: error3,\n    emailFilled: emailFilled,\n    pwFilled: pwFilled,\n    onKeyDown: e => checkEnter(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"emailBox logInEmail \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: loginstate.logInEmail,\n    placeholder: \"\\uC774\\uBA54\\uC77C\",\n    className: \"correctEmail errorForEmail typingEmail\",\n    name: \"logInEmail\",\n    onChange: inputLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }), error1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"closeIcon\",\n    onClick: () => closeIcon(\"email\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Close, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  })), error2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"closeIcon\",\n    onClick: () => closeIcon(\"email\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Close, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }))), error1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"emailError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 18\n    }\n  }, \"\\uC62C\\uBC14\\uB978 \\uC774\\uBA54\\uC77C\\uC774 \\uC544\\uB2D9\\uB2C8\\uB2E4.\"), error2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"emailError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 18\n    }\n  }, \"\\uC874\\uC7AC\\uD558\\uC9C0 \\uC54A\\uB294 \\uACC4\\uC815 \\uC785\\uB2C8\\uB2E4.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pwBox logInPassword \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: loginstate.logInPassword,\n    placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n    className: \"typingPw errorForPw\",\n    name: \"logInPassword\",\n    onChange: inputLogin,\n    type: pwvisibility ? \"text\" : \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }), pwFilled && pwvisibility && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"eyeIcon\",\n    onClick: eyeIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Visiblility, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  })), pwFilled && !pwvisibility && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"eyeIcon\",\n    onClick: eyeIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(VisibilityOff, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }))), error3 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"passwordError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"), /*#__PURE__*/React.createElement(ForgetPw, {\n    onClick: () => propsFromHome.history.push(\"/ForgotPasswordPage\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC78A\\uC73C\\uC168\\uB098\\uC694?\"), /*#__PURE__*/React.createElement(FooterBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LoginButton, {\n    button: isLoginBtnActive,\n    onClick: btnLogin,\n    disabled: isLoginBtnActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, \"\\uB85C\\uADF8\\uC778\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 47\n    }\n  }) : \"\")), /*#__PURE__*/React.createElement(SnackbarWrapper, {\n    open: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"right\"\n    },\n    open: open,\n    autoHideDuration: 3000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PopupContent, {\n    message: `${userName} 님, 로그인을 환영합니다!`,\n    style: {\n      background: \"#757575\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default LogIn;\nconst LoginInputBox = styled.div`\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  padding-right: 16px;\n  padding-left: 16px;\n\n  .emailBox {\n    width: 100%;\n    position: relative;\n\n    input {\n      padding: 13px;\n      width: 100%;\n      height: 56px;\n      background: white;\n      font-size: 16px;\n    }\n    .errorForEmail {\n      ${({\n  error1\n}) => error1 && `border-bottom: 1px solid red`}\n      ${({\n  error2\n}) => error2 && `border-bottom: 1px solid red`}\n    }\n    .typingEmail {\n      ${({\n  emailFilled,\n  error1,\n  error2\n}) => emailFilled && !error1 && !error2 && `border-bottom: 1px solid #757575`}\n    }\n    .closeIcon {\n      left: 88%;\n      top: 5%;\n      position: absolute;\n    }\n  }\n  .pwBox {\n    width: 100%;\n    height: 56px;\n    position: relative;\n\n    input {\n      padding: 13px;\n      width: 100%;\n      height: 56px;\n      background: white;\n      font-size: 16px;\n    }\n    .errorForPw {\n      ${({\n  error3\n}) => error3 && `border-bottom: 1px solid red`}\n    }\n    .typingPw {\n      ${({\n  pwFilled,\n  error3\n}) => pwFilled && !error3 && `border-bottom: 1px solid #757575`}\n    }\n\n    .eyeIcon {\n      left: 88%;\n      top: 6%;\n      position: absolute;\n    }\n  }\n  .logInPassword {\n    ${({\n  error1,\n  error2\n}) => !error1 && !error2 && `margin-top: 5%;`}\n    ${({\n  error1,\n  emailFilled\n}) => error1 && emailFilled && `margin-top: 0.5%;`}\n    ${({\n  error2,\n  emailFilled\n}) => error2 && emailFilled && `margin-top: 0.5%;`}\n\n    ${({\n  error3\n}) => !error3 && `margin-bottom: 5%;`}\n    ${({\n  error3,\n  pwFilled\n}) => error3 && pwFilled && `margin-bottom: 0.5%;`}\n  }\n\n  .emailError,\n  .passwordError {\n    font-size: 13px;\n    color: #e64a19;\n    left: 2%;\n  }\n  .loading {\n    position: absolute;\n    left: 160px;\n    bottom: -10px;\n  }\n`;\nconst FooterBox = footerBox;\nconst LoginButton = styled.button`\n  position: relative;\n  margin-top: 25.4%;\n  height: 48px;\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 14px;\n  text-align: center;\n  letter-spacing: 0.08em;\n  color: #ffffff;\n  cursor: ${({\n  button\n}) => button ? \"cursor\" : \"pointer\"};\n  background: ${({\n  button\n}) => button ? \"#BDBDBD\" : \"#212121\"};\n`;\nconst ForgetPw = styled.div`\n  margin-left: 20px;\n  margin-top: 20px;\n  font-size: 14px;\n  cursor: pointer;\n`;\nconst SnackbarWrapper = styled.div`\n  position: fixed;\n  display: ${({\n  open\n}) => open ? \"block\" : \"none\"};\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.65);\n  z-index: 100;\n`;\nconst PopupContent = styled(SnackbarContent)`\n  .MuiSnackbarContent-message {\n    color: #fff;\n  }\n`;","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners/src/Components/homeComponents/LogIn.js"],"names":["React","useState","Snackbar","SnackbarContent","logInApi","TOKEN","footerBox","Loading","styled","Close","Visiblility","VisibilityOff","LogIn","props","propsFromHome","loginstate","setLogInState","logInEmail","logInPassword","isLoginBtnActive","length","emailFilled","pwFilled","error1","setError1","error2","setError2","error3","setError3","pwvisibility","setPwVisibility","open","setOpen","userName","setUserName","loading","setLoading","regEmail","inputLogin","e","name","value","target","prevState","btnLogin","formData","FormData","append","test","console","log","fetch","method","headers","Authorization","body","then","res","json","success","localStorage","setItem","data","access_token","email","new_user","window","location","href","alert","error","type","closeIcon","param","eyeIcon","checkEnter","keyCode","history","push","vertical","horizontal","background","LoginInputBox","div","FooterBox","LoginButton","button","ForgetPw","SnackbarWrapper","PopupContent"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { SnackbarContent } from \"@material-ui/core\";\nimport { logInApi, TOKEN } from \"../../Config/urls\";\nimport { footerBox } from \"../../Config/commonStyles\";\nimport Loading from \"../../../src/Components/Loading\";\nimport styled from \"styled-components\";\nimport Close from \"../../Images/Close\";\nimport Visiblility from \"../../Images/Visibility\";\nimport VisibilityOff from \"../../Images/VisibilityOff\";\n\nfunction LogIn(props) {\n  const propsFromHome = props.props;\n\n  const [loginstate, setLogInState] = useState({\n    logInEmail: \"\",\n    logInPassword: \"\"\n  });\n  const { logInEmail, logInPassword } = loginstate;\n  const isLoginBtnActive = !(logInEmail.length > 0 && logInPassword.length > 0);\n  const emailFilled = logInEmail.length > 0;\n  const pwFilled = logInPassword.length > 0;\n\n  const [error1, setError1] = useState(false); //올바른 이메일이 아닙니다.\n  const [error2, setError2] = useState(false); //계정존재 XX\n  const [error3, setError3] = useState(false); //비밀번호 일치 X\n\n  const [pwvisibility, setPwVisibility] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n\n  const [loading, setLoading] = useState(null); //Loading spinner\n\n  const regEmail = /^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i;\n\n  function inputLogin(e) {\n    const { name, value } = e.target;\n    setLogInState(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n\n    if (value === \"\") {\n      setError1(false);\n      setError2(false);\n      setError3(false);\n    }\n  }\n\n  function btnLogin() {\n    const { logInEmail, logInPassword } = loginstate;\n    const formData = new FormData();\n    formData.append(\"email\", logInEmail);\n    formData.append(\"password\", logInPassword);\n\n    if (!regEmail.test(logInEmail)) {\n      setError1(true);\n    } else {\n      setLoading(true);\n      console.log(\"ee\", loading);\n\n      fetch(logInApi, {\n        method: \"POST\",\n        headers: {\n          Authorization: TOKEN\n        },\n        body: formData\n      })\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          return res;\n        })\n        .then(res => {\n          if (res.success === 1) {\n            // 로그인성공;\n            setLoading(false);\n            localStorage.setItem(\"access_token\", res.data.access_token);\n            localStorage.setItem(\"email\", res.data.email);\n            localStorage.setItem(\"new_user\", res.data.new_user);\n            setUserName(res.data.name);\n            res.data.access_token\n              ? setOpen(true)((window.location.href = \"/CreateEvent\"))\n              : alert(\"로그인 실패!\");\n          } else if (res.error.type === 3) {\n            setLoading(false);\n            setError2(true); //계정존재 XX\n          } else if (res.error.type === 4) {\n            setLoading(false);\n            setError3(true); //비밀번호 일치 X\n          }\n        });\n    }\n  }\n\n  function closeIcon(param) {\n    if (param === \"email\") {\n      setLogInState(prevState => ({\n        ...prevState,\n        logInEmail: \"\"\n      }));\n      setError1(false);\n      setError2(false);\n    }\n  }\n\n  function eyeIcon() {\n    setPwVisibility(!pwvisibility);\n  }\n\n  const checkEnter = e => {\n    if (e.keyCode === 13) {\n      btnLogin();\n    }\n  };\n\n  return (\n    <LoginInputBox\n      error1={error1}\n      error2={error2}\n      error3={error3}\n      emailFilled={emailFilled}\n      pwFilled={pwFilled}\n      onKeyDown={e => checkEnter(e)}\n    >\n      <div className=\"emailBox logInEmail \">\n        <input\n          value={loginstate.logInEmail}\n          placeholder=\"이메일\"\n          className=\"correctEmail errorForEmail typingEmail\"\n          name=\"logInEmail\"\n          onChange={inputLogin}\n        />\n        {error1 && (\n          <div className=\"closeIcon\" onClick={() => closeIcon(\"email\")}>\n            <Close />\n          </div>\n        )}\n        {error2 && (\n          <div className=\"closeIcon\" onClick={() => closeIcon(\"email\")}>\n            <Close />\n          </div>\n        )}\n      </div>\n      {error1 && <div className=\"emailError\">올바른 이메일이 아닙니다.</div>}\n      {error2 && <div className=\"emailError\">존재하지 않는 계정 입니다.</div>}\n      <div className=\"pwBox logInPassword \">\n        <input\n          value={loginstate.logInPassword}\n          placeholder=\"비밀번호\"\n          className=\"typingPw errorForPw\"\n          name=\"logInPassword\"\n          onChange={inputLogin}\n          type={pwvisibility ? \"text\" : \"password\"}\n        />\n        {pwFilled && pwvisibility && (\n          <div className=\"eyeIcon\" onClick={eyeIcon}>\n            <Visiblility />\n          </div>\n        )}\n        {pwFilled && !pwvisibility && (\n          <div className=\"eyeIcon\" onClick={eyeIcon}>\n            <VisibilityOff />\n          </div>\n        )}\n      </div>\n      {error3 && (\n        <div className=\"passwordError\">비밀번호가 일치하지 않습니다.</div>\n      )}\n\n      <ForgetPw\n        onClick={() => propsFromHome.history.push(\"/ForgotPasswordPage\")}\n      >\n        비밀번호를 잊으셨나요?\n      </ForgetPw>\n      <FooterBox>\n        <LoginButton\n          button={isLoginBtnActive}\n          onClick={btnLogin}\n          disabled={isLoginBtnActive}\n        >\n          로그인\n          <div className=\"loading\">{loading ? <Loading /> : \"\"}</div>\n        </LoginButton>\n\n        <SnackbarWrapper open={open}>\n          <Snackbar\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"right\"\n            }}\n            open={open}\n            autoHideDuration={3000}\n          >\n            <PopupContent\n              message={`${userName} 님, 로그인을 환영합니다!`}\n              style={{ background: \"#757575\" }}\n            />\n          </Snackbar>\n        </SnackbarWrapper>\n      </FooterBox>\n    </LoginInputBox>\n  );\n}\nexport default LogIn;\n\nconst LoginInputBox = styled.div`\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  padding-right: 16px;\n  padding-left: 16px;\n\n  .emailBox {\n    width: 100%;\n    position: relative;\n\n    input {\n      padding: 13px;\n      width: 100%;\n      height: 56px;\n      background: white;\n      font-size: 16px;\n    }\n    .errorForEmail {\n      ${({ error1 }) => error1 && `border-bottom: 1px solid red`}\n      ${({ error2 }) => error2 && `border-bottom: 1px solid red`}\n    }\n    .typingEmail {\n      ${({ emailFilled, error1, error2 }) =>\n        emailFilled && !error1 && !error2 && `border-bottom: 1px solid #757575`}\n    }\n    .closeIcon {\n      left: 88%;\n      top: 5%;\n      position: absolute;\n    }\n  }\n  .pwBox {\n    width: 100%;\n    height: 56px;\n    position: relative;\n\n    input {\n      padding: 13px;\n      width: 100%;\n      height: 56px;\n      background: white;\n      font-size: 16px;\n    }\n    .errorForPw {\n      ${({ error3 }) => error3 && `border-bottom: 1px solid red`}\n    }\n    .typingPw {\n      ${({ pwFilled, error3 }) =>\n        pwFilled && !error3 && `border-bottom: 1px solid #757575`}\n    }\n\n    .eyeIcon {\n      left: 88%;\n      top: 6%;\n      position: absolute;\n    }\n  }\n  .logInPassword {\n    ${({ error1, error2 }) => !error1 && !error2 && `margin-top: 5%;`}\n    ${({ error1, emailFilled }) => error1 && emailFilled && `margin-top: 0.5%;`}\n    ${({ error2, emailFilled }) => error2 && emailFilled && `margin-top: 0.5%;`}\n\n    ${({ error3 }) => !error3 && `margin-bottom: 5%;`}\n    ${({ error3, pwFilled }) => error3 && pwFilled && `margin-bottom: 0.5%;`}\n  }\n\n  .emailError,\n  .passwordError {\n    font-size: 13px;\n    color: #e64a19;\n    left: 2%;\n  }\n  .loading {\n    position: absolute;\n    left: 160px;\n    bottom: -10px;\n  }\n`;\n\nconst FooterBox = footerBox;\n\nconst LoginButton = styled.button`\n  position: relative;\n  margin-top: 25.4%;\n  height: 48px;\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 14px;\n  text-align: center;\n  letter-spacing: 0.08em;\n  color: #ffffff;\n  cursor: ${({ button }) => (button ? \"cursor\" : \"pointer\")};\n  background: ${({ button }) => (button ? \"#BDBDBD\" : \"#212121\")};\n`;\n\nconst ForgetPw = styled.div`\n  margin-left: 20px;\n  margin-top: 20px;\n  font-size: 14px;\n  cursor: pointer;\n`;\n\nconst SnackbarWrapper = styled.div`\n  position: fixed;\n  display: ${({ open }) => (open ? \"block\" : \"none\")};\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.65);\n  z-index: 100;\n`;\n\nconst PopupContent = styled(SnackbarContent)`\n  .MuiSnackbarContent-message {\n    color: #fff;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}