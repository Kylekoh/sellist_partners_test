{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 10px;\\n  align-self: flex-end;\\n  justify-content: flex-end;\\n\\n  @media (max-width: 500px) {\\n  }\\n\\n  img {\\n    cursor: pointer;\\n    padding-right: 9px;\\n    margin-top: -11px;\\n    @media (max-width: 500px) {\\n      font-size: 28px;\\n    }\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  font-style: normal;\\n  font-weight: 300;\\n  font-size: 34px;\\n  color: #96a9cf;\\n  white-space: nowrap;\\n  margin-bottom: 9px;\\n  padding-right: 0px;\\n  @media (max-width: 500px) {\\n    font-size: 24px;\\n  }\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-content: center;\\n  margin-bottom: 50px;\\n  padding-right: 20px;\\n  @media (max-width: 500px) {\\n    padding-right: 30px;\\n    margin-left: 20px;\\n    margin-bottom: 30px;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  width: 100vw;\\n  margin: 1.5% 4% 0 30px;\\n  display: flex;\\n  flex-direction: column;\\n  position: relative;\\n  /* background-color: gray; */\\n  @media (max-width: 500px) {\\n    margin: 0px;\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  max-width: 1400px;\\n  display: flex;\\n  padding: 24px;\\n\\n  @media (max-width: 500px) {\\n    margin-top: 80px;\\n    padding: 0px;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect,useContext}from\"react\";import{Prompt,withRouter}from\"react-router-dom\";import WarningDialog from\"../../Components/modals/WarningDialog\";import styled from\"styled-components\";import{useSelector,useDispatch}from\"react-redux\";import CreateEventItem from\"./CreateEventItem/CreateEventItem\";import CreateEventDate from\"./CreateEventDate/CreateEventDate\";import TooltipModal from\"../../Components/modals/TootipModal\";import DeleteParentModal from\"../Order/Components/DeleteParentModal\";import DeletedSnackBar from\"../Order/Components/DeletedSnackBar\";import{useMediaQuery}from\"react-responsive\";import{setTooltipToggle}from\"../../modules/TooltipModule\";import{setUsername,setEventName,setEventUrl,setShoppingUrl,setOriginalPrice,setNewPrice,setUserImage,setEventImg,setEventCategory,setSalesDurationStart,setSalesDurationEnd,deleteProfileImg,deleteEventImg}from\"../../modules/UserInputModule\";import{NewUserContext}from\"../../Context/newUserContext\";import Loading from\"../../Components/Loading\";function CreateEventItemPage(_ref){var history=_ref.history,props=_objectWithoutProperties(_ref,[\"history\"]);var isMobile=useMediaQuery({query:\"(max-width: 500px)\"});var email=localStorage.getItem(\"email\");var accessToken=localStorage.getItem(\"access_token\");// const isNewUser = localStorage.getItem(\"new_user\") === \"1\";\nvar tooltipToggle=useSelector(function(store){return store.toggleReducer;});var del=useSelector(function(store){return store.deleteReducer;});var deleted=useSelector(function(store){return store.confirmDeleteReducer;});var username=useSelector(function(store){return store.usernameReducer;});var userImage=useSelector(function(store){return store.profileimgReducer;});var eventname=useSelector(function(store){return store.eventnameReducer;});var eventimg=useSelector(function(store){return store.eventimgReducer;});var eventUrl=useSelector(function(store){return store.eventurlReducer;});var shoppingUrl=useSelector(function(store){return store.shoppingurlReducer;});var originalPrice=useSelector(function(store){return store.originalpriceReducer;});var newPrice=useSelector(function(store){return store.newpriceReducer;});var durationStart=useSelector(function(store){return store.durationStartReducer;});var durationEnd=useSelector(function(store){return store.durationEndReducer;});var category=useSelector(function(store){return store.eventcategoryReducer;});var pointCheck=useSelector(function(store){return store.checkPointReducer;});//무엇인가를 한번이라도 수정하고 페이지를 나가려고 하면 그때 띄울 것이다. when에 넣어줄 boolean 값\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),shouldConfirm=_useState2[0],setShouldConfirm=_useState2[1];//isLeave값은 모달에서 나가기 버튼을 클릭했을 때 true로 변경\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLeave=_useState4[0],setIsLeave=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),lastLocation=_useState6[0],setLastLocation=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showConfirmModal=_useState8[0],setShowConfirmModal=_useState8[1];var _useContext=useContext(NewUserContext),isNewUser=_useContext.isNewUser,setIsNewUser=_useContext.setIsNewUser;var dispatch=useDispatch();var showModal=function showModal(location){// if (location.pathname === \"/CreateEvent/CreateDate\") {\n//   console.log(\"1111\");\n//   setShowConfirmModal(false);\n//   setLastLocation(location);\n// } else {\n//   console.log(\"222\");\n//   setShowConfirmModal(true);\n//   setLastLocation(location);\n// }\nsetShowConfirmModal(true);setLastLocation(location);};//아니요 눌렀을 때 발생하는 함수\nvar closeModal=function closeModal(){setShowConfirmModal(false);};//네 눌렀을 때 발생하는 함수, 모달창없어지면서 현재 창을 떠난다!\nvar handleConfirmNavigationClick=function handleConfirmNavigationClick(){setShowConfirmModal(false);setIsLeave(true);// 밖으로가기 버튼을 눌렀을시 입력된 모든 정보를 리셋한다.\ndispatch(setUserImage(null));dispatch(setEventImg(null));dispatch(setUsername(null));dispatch(setEventName(null));dispatch(setEventUrl(null));dispatch(setShoppingUrl(null));dispatch(setOriginalPrice(null));dispatch(setNewPrice(null));dispatch(setEventCategory(null));dispatch(setSalesDurationStart(null));dispatch(setSalesDurationEnd(null));};//message에 들어갈 함수값.isLeave값이 false고 shouldConfirm이 true면? return false(페이지 이동을 막는다)\nvar handlePrompt=function handlePrompt(nextLocation){if(nextLocation.pathname===\"/CreateEvent/CreateDate\"){return true;}if(!isLeave&&shouldConfirm){showModal(nextLocation);return false;}return true;// if ((nextLocation.pathname = \"/CreateEvent/CreateDate\")) {\n//   return true;\n// } else if (!isLeave && shouldConfirm) {\n//   showModal(nextLocation);\n//   return false;\n// } else {\n//   return true;\n// }\n};/* 최초 로그인이 아닐 경우, 조건에 만족하지 않아 tour pop-up 실행되지 않는다.\n하지만 아래 함수가 실행되면 pop-up이 뜨는 조건으로 변경된다. */var handleTooltip=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// localStorage.setItem(\"new_user\", 1);\ndispatch(setTooltipToggle(true));case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleTooltip(){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log(\"이즈 뉴유저 크리에이트아이템\",isNewUser);},[isNewUser]);useEffect(function(){var item=localStorage.getItem(\"new_user\");console.log(item);if(item===\"1\"){setIsNewUser(true);console.log(\"새로운 유저다!!!\");}else{setIsNewUser(false);console.log(\"새로운 유저가 아니다!!!\");}// 처음들어왔을때 모든 입력데이터를 초기화한다\ndispatch(setUserImage(null));dispatch(setEventImg(null));dispatch(setUsername(null));dispatch(setEventName(null));dispatch(setEventUrl(null));dispatch(setShoppingUrl(null));dispatch(setOriginalPrice(null));dispatch(setNewPrice(null));dispatch(setEventCategory(null));dispatch(setSalesDurationStart(null));dispatch(setSalesDurationEnd(null));},[]);// useEffect(() => {\n//   function checkIsNewUser() {\n//     const item = localStorage.getItem(\"new_user\");\n//     if (item === 1) {\n//       setIsNewUser(true);\n//       console.log(\"이즈뉴유저\", isNewUser);\n//     } else {\n//       setIsNewUser(false);\n//       console.log(\"이즈뉴유저\", isNewUser);\n//     }\n//     console.log(\"로컬스토리지\", item);\n//   }\n//   window.addEventListener(\"storage\", checkIsNewUser);\n//   return () => {\n//     window.removeEventListener(\"storage\", checkIsNewUser);\n//   };\n// }, []);\n//isLeave값이 변경되면 useEffect가 실행되고 true일 때 아까 담아둔 lastLocation값으로 histoty.push해준다\nuseEffect(function(){if(pointCheck){window.location.href=\"/CreditsPage\";}if(isLeave&&lastLocation){return history.push(lastLocation);}},[history,isLeave,lastLocation,pointCheck]);useEffect(function(){// 이벤트 항목 중에 1개라도 입력되었을시 shouldConfirm을 true로 바꾼다\n// 유저가 입력하다가 다른 페이지로 이동했을때\n// 경고창을 띄우기 위함\nif((username||userImage||eventimg||eventname||// eventUrl ||\n// shoppingUrl ||\noriginalPrice||newPrice||durationStart||durationEnd||category)&&!shouldConfirm){setShouldConfirm(true);}},[username,userImage,eventimg,eventname,shoppingUrl,originalPrice,newPrice,durationStart,durationEnd,category,shouldConfirm]);if(!email&&!accessToken){window.location.href=\"/\";}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,null,isNewUser||tooltipToggle?/*#__PURE__*/React.createElement(TooltipModal,null):\"\",del&&/*#__PURE__*/React.createElement(DeleteParentModal,null),deleted&&/*#__PURE__*/React.createElement(DeletedSnackBar,null),/*#__PURE__*/React.createElement(SubContainer,null,/*#__PURE__*/React.createElement(SubContainerHeader,null,/*#__PURE__*/React.createElement(Title,null,\"\\uC774\\uBCA4\\uD2B8 \\uC815\\uBCF4\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\"),/*#__PURE__*/React.createElement(ImageContainer,null,/*#__PURE__*/React.createElement(\"img\",{onClick:handleTooltip,src:\"/images/Info.svg\",alt:\"Info\"}))),/*#__PURE__*/React.createElement(CreateEventItem,null)),/*#__PURE__*/React.createElement(Prompt,{when:shouldConfirm,message:handlePrompt}),/*#__PURE__*/React.createElement(WarningDialog,{open:showConfirmModal,contentText:\" \\uC785\\uB825\\uD558\\uC2E0 \\uC815\\uBCF4\\uB294 \\uC800\\uC7A5\\uB418\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4. \\uC815\\uB9D0\\uB85C \\uB098\\uAC00\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",cancelButtonText:\"\\uC544\\uB2C8\\uC694\",confirmButtonText:\"\\uB124\",onCancel:closeModal,onConfirm:handleConfirmNavigationClick})));}}export default CreateEventItemPage;var Container=styled.main(_templateObject());var SubContainer=styled.div(_templateObject2());var SubContainerHeader=styled.div(_templateObject3());var Title=styled.div(_templateObject4());var ImageContainer=styled.div(_templateObject5());","map":{"version":3,"sources":["/Users/merchsquare/Desktop/Kyle/sellist-partners_backup1(02.10)/src/Pages/CreateEvent/CreateEventItemPage.js"],"names":["React","useState","useEffect","useContext","Prompt","withRouter","WarningDialog","styled","useSelector","useDispatch","CreateEventItem","CreateEventDate","TooltipModal","DeleteParentModal","DeletedSnackBar","useMediaQuery","setTooltipToggle","setUsername","setEventName","setEventUrl","setShoppingUrl","setOriginalPrice","setNewPrice","setUserImage","setEventImg","setEventCategory","setSalesDurationStart","setSalesDurationEnd","deleteProfileImg","deleteEventImg","NewUserContext","Loading","CreateEventItemPage","history","props","isMobile","query","email","localStorage","getItem","accessToken","tooltipToggle","store","toggleReducer","del","deleteReducer","deleted","confirmDeleteReducer","username","usernameReducer","userImage","profileimgReducer","eventname","eventnameReducer","eventimg","eventimgReducer","eventUrl","eventurlReducer","shoppingUrl","shoppingurlReducer","originalPrice","originalpriceReducer","newPrice","newpriceReducer","durationStart","durationStartReducer","durationEnd","durationEndReducer","category","eventcategoryReducer","pointCheck","checkPointReducer","shouldConfirm","setShouldConfirm","isLeave","setIsLeave","lastLocation","setLastLocation","showConfirmModal","setShowConfirmModal","isNewUser","setIsNewUser","dispatch","showModal","location","closeModal","handleConfirmNavigationClick","handlePrompt","nextLocation","pathname","handleTooltip","console","log","item","window","href","push","Container","main","SubContainer","div","SubContainerHeader","Title","ImageContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Prompt, withRouter } from \"react-router-dom\";\nimport WarningDialog from \"../../Components/modals/WarningDialog\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CreateEventItem from \"./CreateEventItem/CreateEventItem\";\nimport CreateEventDate from \"./CreateEventDate/CreateEventDate\";\nimport TooltipModal from \"../../Components/modals/TootipModal\";\nimport DeleteParentModal from \"../Order/Components/DeleteParentModal\";\nimport DeletedSnackBar from \"../Order/Components/DeletedSnackBar\";\nimport { useMediaQuery } from \"react-responsive\";\n\nimport { setTooltipToggle } from \"../../modules/TooltipModule\";\nimport {\n  setUsername,\n  setEventName,\n  setEventUrl,\n  setShoppingUrl,\n  setOriginalPrice,\n  setNewPrice,\n  setUserImage,\n  setEventImg,\n  setEventCategory,\n  setSalesDurationStart,\n  setSalesDurationEnd,\n  deleteProfileImg,\n  deleteEventImg\n} from \"../../modules/UserInputModule\";\nimport { NewUserContext } from \"../../Context/newUserContext\";\nimport Loading from \"../../Components/Loading\";\n\nfunction CreateEventItemPage({ history, ...props }) {\n  const isMobile = useMediaQuery({\n    query: \"(max-width: 500px)\"\n  });\n\n  const email = localStorage.getItem(\"email\");\n  const accessToken = localStorage.getItem(\"access_token\");\n  // const isNewUser = localStorage.getItem(\"new_user\") === \"1\";\n\n  const tooltipToggle = useSelector(store => store.toggleReducer);\n  const del = useSelector(store => store.deleteReducer);\n  const deleted = useSelector(store => store.confirmDeleteReducer);\n\n  const username = useSelector(store => store.usernameReducer);\n  const userImage = useSelector(store => store.profileimgReducer);\n  const eventname = useSelector(store => store.eventnameReducer);\n  const eventimg = useSelector(store => store.eventimgReducer);\n  const eventUrl = useSelector(store => store.eventurlReducer);\n  const shoppingUrl = useSelector(store => store.shoppingurlReducer);\n  const originalPrice = useSelector(store => store.originalpriceReducer);\n  const newPrice = useSelector(store => store.newpriceReducer);\n  const durationStart = useSelector(store => store.durationStartReducer);\n  const durationEnd = useSelector(store => store.durationEndReducer);\n  const category = useSelector(store => store.eventcategoryReducer);\n\n  const pointCheck = useSelector(store => store.checkPointReducer);\n  //무엇인가를 한번이라도 수정하고 페이지를 나가려고 하면 그때 띄울 것이다. when에 넣어줄 boolean 값\n  const [shouldConfirm, setShouldConfirm] = useState(false);\n  //isLeave값은 모달에서 나가기 버튼을 클릭했을 때 true로 변경\n  const [isLeave, setIsLeave] = useState(false);\n  const [lastLocation, setLastLocation] = useState();\n\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  const { isNewUser, setIsNewUser } = useContext(NewUserContext);\n\n  const dispatch = useDispatch();\n\n  const showModal = location => {\n    // if (location.pathname === \"/CreateEvent/CreateDate\") {\n    //   console.log(\"1111\");\n    //   setShowConfirmModal(false);\n    //   setLastLocation(location);\n    // } else {\n    //   console.log(\"222\");\n    //   setShowConfirmModal(true);\n    //   setLastLocation(location);\n    // }\n    setShowConfirmModal(true);\n    setLastLocation(location);\n  };\n\n  //아니요 눌렀을 때 발생하는 함수\n  const closeModal = () => {\n    setShowConfirmModal(false);\n  };\n\n  //네 눌렀을 때 발생하는 함수, 모달창없어지면서 현재 창을 떠난다!\n  const handleConfirmNavigationClick = () => {\n    setShowConfirmModal(false);\n    setIsLeave(true);\n\n    // 밖으로가기 버튼을 눌렀을시 입력된 모든 정보를 리셋한다.\n    dispatch(setUserImage(null));\n    dispatch(setEventImg(null));\n    dispatch(setUsername(null));\n    dispatch(setEventName(null));\n    dispatch(setEventUrl(null));\n    dispatch(setShoppingUrl(null));\n    dispatch(setOriginalPrice(null));\n    dispatch(setNewPrice(null));\n    dispatch(setEventCategory(null));\n    dispatch(setSalesDurationStart(null));\n    dispatch(setSalesDurationEnd(null));\n  };\n\n  //message에 들어갈 함수값.isLeave값이 false고 shouldConfirm이 true면? return false(페이지 이동을 막는다)\n  const handlePrompt = nextLocation => {\n    if (nextLocation.pathname === \"/CreateEvent/CreateDate\") {\n      return true;\n    }\n    if (!isLeave && shouldConfirm) {\n      showModal(nextLocation);\n      return false;\n    }\n    return true;\n\n    // if ((nextLocation.pathname = \"/CreateEvent/CreateDate\")) {\n    //   return true;\n    // } else if (!isLeave && shouldConfirm) {\n    //   showModal(nextLocation);\n    //   return false;\n    // } else {\n    //   return true;\n    // }\n  };\n\n  /* 최초 로그인이 아닐 경우, 조건에 만족하지 않아 tour pop-up 실행되지 않는다.\n하지만 아래 함수가 실행되면 pop-up이 뜨는 조건으로 변경된다. */\n  const handleTooltip = async () => {\n    // localStorage.setItem(\"new_user\", 1);\n    dispatch(setTooltipToggle(true));\n  };\n\n  useEffect(() => {\n    console.log(\"이즈 뉴유저 크리에이트아이템\", isNewUser);\n  }, [isNewUser]);\n\n  useEffect(() => {\n    const item = localStorage.getItem(\"new_user\");\n    console.log(item);\n    if (item === \"1\") {\n      setIsNewUser(true);\n      console.log(\"새로운 유저다!!!\");\n    } else {\n      setIsNewUser(false);\n      console.log(\"새로운 유저가 아니다!!!\");\n    }\n\n    // 처음들어왔을때 모든 입력데이터를 초기화한다\n    dispatch(setUserImage(null));\n    dispatch(setEventImg(null));\n    dispatch(setUsername(null));\n    dispatch(setEventName(null));\n    dispatch(setEventUrl(null));\n    dispatch(setShoppingUrl(null));\n    dispatch(setOriginalPrice(null));\n    dispatch(setNewPrice(null));\n    dispatch(setEventCategory(null));\n    dispatch(setSalesDurationStart(null));\n    dispatch(setSalesDurationEnd(null));\n  }, []);\n\n  // useEffect(() => {\n  //   function checkIsNewUser() {\n  //     const item = localStorage.getItem(\"new_user\");\n  //     if (item === 1) {\n  //       setIsNewUser(true);\n  //       console.log(\"이즈뉴유저\", isNewUser);\n  //     } else {\n  //       setIsNewUser(false);\n  //       console.log(\"이즈뉴유저\", isNewUser);\n  //     }\n  //     console.log(\"로컬스토리지\", item);\n  //   }\n\n  //   window.addEventListener(\"storage\", checkIsNewUser);\n  //   return () => {\n  //     window.removeEventListener(\"storage\", checkIsNewUser);\n  //   };\n  // }, []);\n\n  //isLeave값이 변경되면 useEffect가 실행되고 true일 때 아까 담아둔 lastLocation값으로 histoty.push해준다\n  useEffect(() => {\n    if (pointCheck) {\n      window.location.href = \"/CreditsPage\";\n    }\n    if (isLeave && lastLocation) {\n      return history.push(lastLocation);\n    }\n  }, [history, isLeave, lastLocation, pointCheck]);\n\n  useEffect(() => {\n    // 이벤트 항목 중에 1개라도 입력되었을시 shouldConfirm을 true로 바꾼다\n    // 유저가 입력하다가 다른 페이지로 이동했을때\n    // 경고창을 띄우기 위함\n    if (\n      (username ||\n        userImage ||\n        eventimg ||\n        eventname ||\n        // eventUrl ||\n        // shoppingUrl ||\n        originalPrice ||\n        newPrice ||\n        durationStart ||\n        durationEnd ||\n        category) &&\n      !shouldConfirm\n    ) {\n      setShouldConfirm(true);\n    }\n  }, [\n    username,\n    userImage,\n    eventimg,\n    eventname,\n    shoppingUrl,\n    originalPrice,\n    newPrice,\n    durationStart,\n    durationEnd,\n    category,\n    shouldConfirm\n  ]);\n\n  if (!email && !accessToken) {\n    window.location.href = \"/\";\n  } else {\n    return (\n      <>\n        <Container>\n          {isNewUser || tooltipToggle ? <TooltipModal /> : \"\"}\n          {del && <DeleteParentModal />}\n          {deleted && <DeletedSnackBar />}\n          <SubContainer>\n            <SubContainerHeader>\n              <Title>이벤트 정보를 입력해 주세요</Title>\n              <ImageContainer>\n                <img\n                  onClick={handleTooltip}\n                  src=\"/images/Info.svg\"\n                  alt=\"Info\"\n                />\n              </ImageContainer>\n            </SubContainerHeader>\n            <CreateEventItem />\n          </SubContainer>\n          <Prompt when={shouldConfirm} message={handlePrompt} />\n          <WarningDialog\n            open={showConfirmModal}\n            contentText=\" 입력하신 정보는 저장되지 않습니다.\n          정말로 나가시겠습니까?\"\n            cancelButtonText=\"아니요\"\n            confirmButtonText=\"네\"\n            onCancel={closeModal}\n            onConfirm={handleConfirmNavigationClick}\n          />\n        </Container>\n      </>\n    );\n  }\n}\nexport default CreateEventItemPage;\n\nconst Container = styled.main`\n  max-width: 1400px;\n  display: flex;\n  padding: 24px;\n\n  @media (max-width: 500px) {\n    margin-top: 80px;\n    padding: 0px;\n  }\n`;\n\nconst SubContainer = styled.div`\n  width: 100vw;\n  margin: 1.5% 4% 0 30px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  /* background-color: gray; */\n  @media (max-width: 500px) {\n    margin: 0px;\n  }\n`;\n\nconst SubContainerHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-content: center;\n  margin-bottom: 50px;\n  padding-right: 20px;\n  @media (max-width: 500px) {\n    padding-right: 30px;\n    margin-left: 20px;\n    margin-bottom: 30px;\n  }\n`;\n\nconst Title = styled.div`\n  font-style: normal;\n  font-weight: 300;\n  font-size: 34px;\n  color: #96a9cf;\n  white-space: nowrap;\n  margin-bottom: 9px;\n  padding-right: 0px;\n  @media (max-width: 500px) {\n    font-size: 24px;\n  }\n`;\n\nconst ImageContainer = styled.div`\n  margin-bottom: 10px;\n  align-self: flex-end;\n  justify-content: flex-end;\n\n  @media (max-width: 500px) {\n  }\n\n  img {\n    cursor: pointer;\n    padding-right: 9px;\n    margin-top: -11px;\n    @media (max-width: 500px) {\n      font-size: 28px;\n    }\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}